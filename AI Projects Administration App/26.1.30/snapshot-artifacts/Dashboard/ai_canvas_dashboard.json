{
  "name": "ai_canvas_dashboard",
  "description": "AI Canvas generated by Conversations",
  "label": "AI Canvas",
  "enabled": true,
  "dashboard_folder": "AI",
  "dashboard_style": "auto",
  "dashboard_type": "dashboard",
  "live_edit": true,
  "dashboard_generator": {
    "attachment": "generator"
  },
  "dashboard_sections": [
    {
      "title": "AI Canvas",
      "show_filter": false,
      "widgets": []
    }
  ],
  "use_storyboard": true,
  "attachments": [
    {
      "name": "generator",
      "value": "{{ dashboard[\"dashboard_sections\"][0][\"widgets\"].clear() }}\n\n{%- set _ = dashboard.update({\n    \"default_storyboard\": \"Main\",\n    \"storyboards\": [\n        {\n            \"name\": \"Main\",\n            \"value\": \"{}\"\n        }\n    ]\n    })\n\n-%}\n\n{%-\n    set sb = {\n        \"stage\": {\n            \"size\": {\n                \"width\": 1920,\n                \"height\": 1080\n            },\n            \"background\": {\n                \"fill\": null,\n                \"src\": null,\n                \"gradient\": {\n                    \"color1\": \"#222222\",\n                    \"color2\": \"#2C2C2C\",\n                    \"type\": \"linear\",\n                    \"rotation\": 90\n                }\n            },\n            \"theme\": null,\n            \"autoFitByDefault\": true,\n            \"autoFitMinWidth\": 480\n        },\n        \"widgets\": [],\n        \"shapes\": [],\n        \"lines\": [],\n        \"sbBookmarkList\": [] \n    }\n-%}\n\n\n{% if conversation_id is  not defined %}\n   {%- set conversation_id = \"unknown\" -%}\n   {%- set message = \"conversation_id not found in context\" -%}\n{%- else -%}\n    {%- set message = \"\" -%}\n{% endif %}\n    \n{%-\n   set cfxql_query = \"conversation_id = '\"+str(conversation_id)+\"' and item_type = 'widget'\"\n-%}\n\n{%-\n    set rows = engine.query_stream_data(\"rda_ai_canvas\", cfxql_query=cfxql_query, limit=100, max_rows=100, sorting=[{\"timestamp\": \"asc\"}])\n-%}\n\n{%- if not rows -%}\n  {%- if not message -%}\n    {%- set message = \"This Canvas does not have any widgets added to it.\" -%}\n  {%- endif -%}\n   {%- set _ = dashboard.pop(\"default_storyboard\", \"\") -%}\n   \n    {{ dashboard[\"dashboard_sections\"][0][\"widgets\"].append({\n        \"widget_type\": \"label\",\n        \"height\": 1,\n        \"max_width\": 12,\n        \"label\": message,\n        \"widget_id\": \"header1\"\n    }) }}\n\n {%- endif -%}\n\n{%-\n    for w in rows\n-%}\n    {%-\n        set wdef = json_loads(w.get('content', '{}'))\n    -%}\n\n    {%-\n        set layout = json_loads(w.get('layoutContent', '{}'))\n    -%}\n\n        {{ dashboard[\"dashboard_sections\"][0][\"widgets\"].append(wdef) }}\n\n        {{ sb[\"widgets\"].append(layout) }}\n  \n{%-\n    endfor\n-%}\n\n{%-\n  set _ = dashboard[\"storyboards\"][0].update({ \"value\": json_dumps(sb) })\n-%}"
    }
  ],
  "storyboards": [
    {
      "name": "Main Storyboard",
      "value": "{\n    \"stage\": {\n        \"size\": {\n            \"width\": 1920,\n            \"height\": 1080\n        },\n        \"background\": {\n            \"fill\": null,\n            \"src\": null,\n            \"gradient\": {\n                \"color1\": \"#222222\",\n                \"color2\": \"#2C2C2C\",\n                \"type\": \"linear\",\n                \"rotation\": 90\n            }\n        },\n        \"theme\": null,\n        \"autoFitByDefault\": true,\n        \"autoFitMinWidth\": 480\n    },\n    \"widgets\": [],\n    \"shapes\": [],\n    \"lines\": [],\n    \"sbBookmarkList\": []\n}"
    }
  ]
}