{
  "name": "ai_tool_usage",
  "label": "Tool Usage: {{TOOL_DOMAIN}}",
  "description": "rda_chat_sessions: Insights",
  "dashboard_folder": "AI",
  "is_template": true,
  "version": "1.0.1",
  "enabled": false,
  "stream": "rda_chat_sessions",
  "dashboard_type": "template",
  "template_variables": {
    "TOOL_DOMAIN": {
      "contextId": "domain",
      "default": "common"
    }
  },
  "live_edit": true,
  "dashboard_filters": {
    "time_filter": true,
    "default_time_filter_labels": [
      "All Time"
    ],
    "columns_filter": [
      {
        "id": "timestamp",
        "label": "Timestamp",
        "type": "DATETIME"
      },
      {
        "id": "USER_ID",
        "label": "User Id",
        "type": "TEXT"
      },
      {
        "id": "conversationId",
        "label": "Conversationid",
        "type": "TEXT"
      },
      {
        "id": "conversationLabel",
        "label": "Conversation Label",
        "type": "TEXT"
      },
      {
        "id": "llm",
        "label": "Llm",
        "type": "TEXT"
      },
      {
        "id": "message",
        "label": "Message",
        "type": "TEXT"
      },
      {
        "id": "persona",
        "label": "Persona",
        "type": "TEXT"
      },
      {
        "id": "tool_content",
        "label": "Tool Content",
        "type": "TEXT"
      },
      {
        "id": "tool_domain",
        "label": "Tool Domain",
        "type": "TEXT"
      },
      {
        "id": "tool_name",
        "label": "Tool Name",
        "type": "TEXT"
      },
      {
        "id": "tool_status",
        "label": "Tool Status",
        "type": "TEXT"
      },
      {
        "id": "type",
        "label": "Type",
        "type": "TEXT"
      },
      {
        "id": "token_usage_cache_tokens",
        "label": "Token Usage Cache Tokens",
        "type": "DOUBLE"
      },
      {
        "id": "token_usage_input_tokens",
        "label": "Token Usage Input Tokens",
        "type": "DOUBLE"
      },
      {
        "id": "token_usage_output_tokens",
        "label": "Token Usage Output Tokens",
        "type": "DOUBLE"
      },
      {
        "id": "token_usage_reasoning_tokens",
        "label": "Token Usage Reasoning Tokens",
        "type": "DOUBLE"
      },
      {
        "id": "token_usage_total_tokens",
        "label": "Token Usage Total Tokens",
        "type": "DOUBLE"
      }
    ],
    "group_filters": [
      {
        "stream": "rda_chat_sessions",
        "title": "LLM",
        "duration_hours": 1080,
        "limit": 200,
        "extra_filter": "tool_domain == '{{TOOL_DOMAIN}}' and tool_name is not empty",
        "group_by": [
          "llm"
        ],
        "ts_column": "timestamp",
        "agg": "sum",
        "column": "count_",
        "type": "int"
      },
      {
        "stream": "rda_chat_sessions",
        "title": "User",
        "duration_hours": 1080,
        "limit": 200,
        "extra_filter": "tool_domain == '{{TOOL_DOMAIN}}' and tool_name is not empty",
        "group_by": [
          "USER_ID"
        ],
        "ts_column": "timestamp",
        "agg": "sum",
        "column": "count_",
        "type": "int"
      },
      {
        "stream": "rda_chat_sessions",
        "title": "Persona",
        "duration_hours": 1080,
        "limit": 200,
        "extra_filter": "tool_domain == '{{TOOL_DOMAIN}}' and tool_name is not empty",
        "group_by": [
          "persona"
        ],
        "ts_column": "timestamp",
        "agg": "sum",
        "column": "count_",
        "type": "int"
      },
      {
        "stream": "rda_chat_sessions",
        "title": "Tool Name",
        "duration_hours": 1080,
        "limit": 200,
        "extra_filter": "tool_domain == '{{TOOL_DOMAIN}}' and tool_name is not empty",
        "group_by": [
          "tool_name"
        ],
        "ts_column": "timestamp",
        "agg": "sum",
        "column": "count_",
        "type": "int"
      }
    ]
  },
  "dashboard_sections": [
    {
      "title": "Monitor Conversations",
      "show_filter": true,
      "widgets": [
        {
          "widget_type": "label",
          "height": 1,
          "min_width": 12,
          "label": "<div style='width='1000%; height: 100%; background-color: #3333DD; color: white; text-align: center;'><center><h2>MCP Tool Domain Usage: {{TOOL_DOMAIN}}</h2></center></div>",
          "widget_id": "6f50692d"
        },
        {
          "widget_type": "bar_chart",
          "title": "By User",
          "stream": "rda_chat_sessions",
          "duration_hours": 1080,
          "limit": 20,
          "chartProperties": {
            "yAxisLabel": null,
            "xAxisLabel": "Count",
            "legendLocation": "none",
            "orientation": "horizontal"
          },
          "extra_filter": "tool_domain == '{{TOOL_DOMAIN}}' and tool_name is not empty",
          "group_by": [
            "USER_ID"
          ],
          "max_width": 12,
          "height": 4,
          "min_width": 4,
          "ts_column": "timestamp",
          "agg": "sum",
          "column": "count_",
          "type": "int",
          "widget_id": "880bbec4"
        },
        {
          "widget_type": "bar_chart",
          "title": "By Persona",
          "stream": "rda_chat_sessions",
          "duration_hours": 1080,
          "limit": 20,
          "chartProperties": {
            "yAxisLabel": null,
            "xAxisLabel": "Count",
            "legendLocation": "none",
            "orientation": "horizontal"
          },
          "extra_filter": "tool_domain == '{{TOOL_DOMAIN}}' and tool_name is not empty",
          "group_by": [
            "persona"
          ],
          "max_width": 12,
          "height": 4,
          "min_width": 4,
          "ts_column": "timestamp",
          "agg": "sum",
          "column": "count_",
          "type": "int",
          "widget_id": "e3fc1d79"
        },
        {
          "widget_type": "bar_chart",
          "title": "By LLM",
          "stream": "rda_chat_sessions",
          "duration_hours": 1080,
          "limit": 20,
          "chartProperties": {
            "yAxisLabel": null,
            "xAxisLabel": "Count",
            "legendLocation": "none",
            "orientation": "horizontal"
          },
          "extra_filter": "tool_domain == '{{TOOL_DOMAIN}}' and tool_name is not empty",
          "group_by": [
            "llm"
          ],
          "max_width": 12,
          "height": 4,
          "min_width": 4,
          "ts_column": "timestamp",
          "agg": "sum",
          "column": "count_",
          "type": "int",
          "widget_id": "b9d4d68f"
        },
        {
          "title": "Conversations Using Tool Domain",
          "widget_type": "tabular",
          "duration_hours": 1080,
          "max_width": 12,
          "height": 8,
          "min_width": 12,
          "stream": "rda_chat_sessions",
          "ts_column": "timestamp",
          "extra_filter": "tool_domain == '{{TOOL_DOMAIN}}' and tool_name is not empty",
          "virtual_scrolling": false,
          "showRowSummary": false,
          "columns": {
            "timestamp": {
              "title": "Timestamp",
              "type": "DATETIME",
              "hidden": false
            },
            "USER_ID": {
              "title": "User Id",
              "type": "TEXT",
              "hidden": false
            },
            "conversationLabel": {
              "title": "Conversation Label",
              "type": "TEXT",
              "hidden": false,
              "key": true
            },
            "persona": {
              "title": "Persona",
              "type": "TEXT",
              "hidden": false
            },
            "llm": {
              "title": "LLM",
              "type": "TEXT",
              "hidden": false
            },
            "tool_name": {
              "title": "Tool Name",
              "type": "TEXT",
              "hidden": false,
              "key": true,
              "htmlTemplateForRow": "{%raw%}<details><summary>{{row.tool_name}}</summary><div style='overflow: auto; height: 150px;'><pre>{{ row.tool_content }}</pre></div></details>{%endraw%}"
            },
            "tool_content": {
              "title": "Tool Content",
              "type": "TEXT",
              "hidden": true,
              "key": false
            },
            "conversationId": {
              "title": "Conversationid",
              "type": "TEXT",
              "hidden": true,
              "key": true
            }
          },
          "actions": [
            {
              "appName": "user-dashboard/ai_conversation_details_app",
              "permission": "agenticai:conversation:view",
              "drillDownLinkField": "conversationLabel",
              "identifier": "conversationLabel",
              "selectionType": "SINGLE",
              "stateName": "app.featureapp",
              "title": "View Details",
              "type": "GO_TO_APP_STATE"
            }
          ],
          "widget_id": "1df1b6dc"
        }
      ]
    }
  ]
}