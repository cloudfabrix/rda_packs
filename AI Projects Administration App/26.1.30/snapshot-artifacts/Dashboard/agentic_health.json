{
    "name": "agentic_health",
    "label": "Agentic Health",
    "description": "Agentic Health",
    "enabled": true,
    "dashboard_type0": "template",
    "dashboard_folder": "Default",
    "live_edit": true,
    "dashboard_style": "auto",
    "default_storyboard0": "Meta Agent",
    "dashboard_sections": [
        {
            "title": "Healthcheck",
            "show_filter": false,
            "widgets": [
                {
                    "widget_type": "label",
                    "label": "<div style='text-align:center;width:100%;'><h1><a style='text-decoration:none;' target='_blank'>LLM Healthcheck</a></h1></div>",
                    "min_width": 12,
                    "widget_id": "healthcheck_label_01"
                },
                {
                    "title": "Healthcheck Records",
                    "widget_type": "tabular",
                    "min_width": 12,
                    "height": 10,
                    "max_width": 12,
                    "timebased": false,
                    "timestamp": "timestamp",
                    "stream": "healthchecks_stream",
                    "remote_searchable_cols": [
                        "run_name",
                        "pipeline_name",
                        "status"
                    ],
                    "columns": {
                        "llm": {
                            "title": "LLM",
                            "key": true
                        },
                        "run_name": {
                            "title": "Run Name",
                            "key": true
                        },
                        "timestamp": {
                            "title": "Timestamp",
                            "type": "DATETIME",
                            "key": false
                        },
                        "user_id": {
                            "title": "User ID",
                            "key": false
                        },
                        "status_color": {
                            "title": "Color",
                            "type": "COLOR-MAP",
                            "source-column": "healthcheck",
                            "color-map": {
                                "failed": "#E53935",
                                "success": "#3CD733"
                            }
                        },
                        "status": {
                            "title": "Status",
                            "key": true,
                            "htmlTemplateForRow": "<span class='badge' style='background-color: {{ row.status_color }};' > {{ row.status }} </span>"
                        }
                    },
                    "widget_id": "healthcheck_widget_01",
                    "actions": [
                        {
                            "title": "Run Healthcheck",
                            "permission": "agenticai:healthcheck:run",
                            "type": "POPUP_FORM",
                            "selectionType": "NONE",
                            "identifier": "saas-service-action:run-healthcheck",
                            "api-endpoint": {
                                "service-name": "saas-reports",
                                "methodName": "getForm",
                                "stringified-params": true,
                                "parse-output": false,
                                "params": [
                                    {
                                        "formId": "rda.saas.dynamic.form",
                                        "formDefinition": {
                                            "formFieldList": [
                                                {
                                                    "fieldId": "run_name",
                                                    "label": "Run Name",
                                                    "description": "Provide a unique name for this pipeline run",
                                                    "help": "A unique identifier for tracking this specific pipeline execution",
                                                    "required": true,
                                                    "dataType": "string",
                                                    "controlType": "TEXTBOX",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "placeholder",
                                                            "value": "e.g. Test claude-sonnet-4 Model"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "help": "LLM Model",
                                                    "dataType": "string",
                                                    "controlType": "COMBO_BOX",
                                                    "required": true,
                                                    "editable": true,
                                                    "label": "LLM Model",
                                                    "hidden": false,
                                                    "fieldId": "llm",
                                                    "lovSourceType": "pstream",
                                                    "lovSourceParams": {
                                                        "name": "rda_secrets_meta",
                                                        "valueColumn": "name",
                                                        "labelColumn": "name",
                                                        "query": "type equals 'llm'"
                                                    }
                                                }
                                            ]
                                        },
                                        "formActionList": {
                                            "formActions": [
                                                {
                                                    "actionLabel": "Run Healthcheck",
                                                    "type": "SUBMIT",
                                                    "identifier": "Submit",
                                                    "api-endpoint": {
                                                        "service-name": "chat-helper",
                                                        "namespace": "io.cfx.dimensions.app",
                                                        "methodName": "run_healthcheck",
                                                        "stringified-params": true,
                                                        "parse-output": false,
                                                        "params": [
                                                            {}
                                                        ]
                                                    }
                                                },
                                                {
                                                    "actionLabel": "Cancel",
                                                    "type": "CANCEL",
                                                    "identifier": "Cancel"
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "custom_widgets": {
        "health": {
            "artifacts": {
                "main": {
                    "attachment": "health.html",
                    "content_type": "text/html",
                    "is_template": true
                }
            }
        }
    },
    "saved_time": "2025-12-15T06:19:36.993049",
    "use_storyboard": false,
    "attachments": [
        {
            "name": "health_working.html",
            "value": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Agentic System Health Dashboard</title>\r\n    <style>\r\n        * {\r\n            margin: 0;\r\n            padding: 0;\r\n            box-sizing: border-box;\r\n        }\r\n\r\n        body {\r\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\r\n            background: #000000;\r\n            min-height: 100vh;\r\n            padding: 2rem;\r\n            color: #ffffff;\r\n        }\r\n\r\n        .dashboard-container {\r\n            max-width: 1200px;\r\n            margin: 0 auto;\r\n        }\r\n\r\n        .header {\r\n            text-align: center;\r\n            color: #ffffff;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .header h1 {\r\n            font-size: 2.5rem;\r\n            margin-bottom: 0.5rem;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            gap: 1rem;\r\n        }\r\n\r\n        .header-icon {\r\n            font-size: 3rem;\r\n            animation: float 3s ease-in-out infinite;\r\n        }\r\n\r\n        @keyframes float {\r\n            0%, 100% { transform: translateY(0px); }\r\n            50% { transform: translateY(-10px); }\r\n        }\r\n\r\n        .header p {\r\n            opacity: 0.95;\r\n            font-size: 1.1rem;\r\n        }\r\n\r\n        .health-widget {\r\n            background: #1f2937;\r\n            border: 1px solid #374151;\r\n            border-radius: 16px;\r\n            box-shadow: 0 20px 60px rgba(0,0,0,0.5);\r\n            padding: 2.5rem;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .widget-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 2rem;\r\n            padding-bottom: 1.5rem;\r\n            border-bottom: 3px solid #374151;\r\n            flex-wrap: wrap;\r\n            gap: 1rem;\r\n        }\r\n\r\n        .widget-title {\r\n            font-size: 1.8rem;\r\n            font-weight: 700;\r\n            color: #ffffff;\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.5rem;\r\n        }\r\n\r\n        .overall-status {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.75rem;\r\n            padding: 0.75rem 1.5rem;\r\n            background: #d4edda;\r\n            color: #155724;\r\n            border-radius: 25px;\r\n            font-weight: 600;\r\n            font-size: 1rem;\r\n            box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n            transition: all 0.3s ease;\r\n        }\r\n\r\n        .overall-status:hover {\r\n            transform: scale(1.05);\r\n        }\r\n\r\n        .overall-status.warning {\r\n            background: #fff3cd;\r\n            color: #856404;\r\n        }\r\n\r\n        .overall-status.error {\r\n            background: #f8d7da;\r\n            color: #721c24;\r\n        }\r\n\r\n        .status-indicator {\r\n            width: 12px;\r\n            height: 12px;\r\n            border-radius: 50%;\r\n            background: #28a745;\r\n            animation: pulse 2s infinite;\r\n            box-shadow: 0 0 10px rgba(40, 167, 69, 0.5);\r\n        }\r\n\r\n        .status-indicator.warning {\r\n            background: #ffc107;\r\n            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);\r\n        }\r\n\r\n        .status-indicator.error {\r\n            background: #dc3545;\r\n            box-shadow: 0 0 10px rgba(220, 53, 69, 0.5);\r\n        }\r\n\r\n        @keyframes pulse {\r\n            0%, 100% { \r\n                opacity: 1;\r\n                transform: scale(1);\r\n            }\r\n            50% { \r\n                opacity: 0.6;\r\n                transform: scale(1.2);\r\n            }\r\n        }\r\n\r\n        .health-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(2, 1fr);\r\n            gap: 1.5rem;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .health-card {\r\n            background: #111827;\r\n            border-radius: 12px;\r\n            padding: 1.75rem;\r\n            border: 1px solid #374151;\r\n            border-left: 5px solid #28a745;\r\n            transition: all 0.3s ease;\r\n            position: relative;\r\n            overflow: hidden;\r\n        }\r\n\r\n        .health-card::before {\r\n            content: '';\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            width: 100px;\r\n            height: 100px;\r\n            background: radial-gradient(circle, rgba(102, 126, 234, 0.05) 0%, transparent 70%);\r\n            border-radius: 50%;\r\n            transform: translate(30%, -30%);\r\n        }\r\n\r\n        .health-card:hover {\r\n            transform: translateY(-5px);\r\n            box-shadow: 0 8px 24px rgba(0,0,0,0.15);\r\n        }\r\n\r\n        .health-card.warning {\r\n            border-left-color: #ffc107;\r\n        }\r\n\r\n        .health-card.error {\r\n            border-left-color: #dc3545;\r\n        }\r\n\r\n        .card-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: flex-start;\r\n            margin-bottom: 1.25rem;\r\n        }\r\n\r\n        .card-title {\r\n            font-size: 0.85rem;\r\n            color: #9ca3af;\r\n            font-weight: 600;\r\n            text-transform: uppercase;\r\n            letter-spacing: 1px;\r\n        }\r\n\r\n        .card-status {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.5rem;\r\n            font-size: 0.8rem;\r\n            font-weight: 700;\r\n            padding: 0.25rem 0.75rem;\r\n            border-radius: 12px;\r\n            background: rgba(40, 167, 69, 0.1);\r\n        }\r\n\r\n        .card-status.success {\r\n            color: #28a745;\r\n        }\r\n\r\n        .card-status.warning {\r\n            color: #ffc107;\r\n            background: rgba(255, 193, 7, 0.1);\r\n        }\r\n\r\n        .card-status.error {\r\n            color: #dc3545;\r\n            background: rgba(220, 53, 69, 0.1);\r\n        }\r\n\r\n        .card-icon {\r\n            width: 16px;\r\n            height: 16px;\r\n        }\r\n\r\n        .card-value {\r\n            font-size: 2.5rem;\r\n            font-weight: 800;\r\n            color: #ffffff;\r\n            margin-bottom: 0.75rem;\r\n            line-height: 1;\r\n        }\r\n\r\n        .card-description {\r\n            font-size: 0.9rem;\r\n            color: #9ca3af;\r\n            line-height: 1.5;\r\n            margin-bottom: 1rem;\r\n        }\r\n\r\n        .card-meta {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            font-size: 0.75rem;\r\n            color: #6b7280;\r\n            padding-top: 0.75rem;\r\n            border-top: 1px solid #374151;\r\n        }\r\n\r\n        .action-button {\r\n            padding: 0.6rem 1.25rem;\r\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n            color: white;\r\n            border: none;\r\n            border-radius: 8px;\r\n            font-size: 0.85rem;\r\n            font-weight: 600;\r\n            cursor: pointer;\r\n            transition: all 0.3s ease;\r\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\r\n        }\r\n\r\n        .action-button:hover {\r\n            transform: translateY(-2px);\r\n            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);\r\n        }\r\n\r\n        .action-button:active {\r\n            transform: translateY(0);\r\n        }\r\n\r\n        .action-button.secondary {\r\n            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\r\n            box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);\r\n        }\r\n\r\n        .action-button.secondary:hover {\r\n            box-shadow: 0 6px 16px rgba(108, 117, 125, 0.4);\r\n        }\r\n\r\n        .summary-stats {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\r\n            gap: 1.25rem;\r\n        }\r\n\r\n        .stat-card {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            border-radius: 12px;\r\n            padding: 1.5rem;\r\n            box-shadow: 0 4px 12px rgba(0,0,0,0.3);\r\n            transition: all 0.3s ease;\r\n            border-top: 4px solid #667eea;\r\n        }\r\n\r\n        .stat-card:hover {\r\n            transform: translateY(-3px);\r\n            box-shadow: 0 6px 16px rgba(0,0,0,0.15);\r\n        }\r\n\r\n        .stat-card:nth-child(2) {\r\n            border-top-color: #ffc107;\r\n        }\r\n\r\n        .stat-label {\r\n            font-size: 0.85rem;\r\n            color: #9ca3af;\r\n            margin-bottom: 0.75rem;\r\n            font-weight: 600;\r\n            text-transform: uppercase;\r\n            letter-spacing: 0.5px;\r\n        }\r\n\r\n        .stat-value {\r\n            font-size: 2rem;\r\n            font-weight: 800;\r\n            color: #ffffff;\r\n            display: flex;\r\n            align-items: baseline;\r\n            gap: 0.5rem;\r\n        }\r\n\r\n        .stat-unit {\r\n            font-size: 1rem;\r\n            color: #9ca3af;\r\n            font-weight: 500;\r\n        }\r\n\r\n\r\n        /* Modal Styles */\r\n        .modal {\r\n            display: none;\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            background-color: rgba(0, 0, 0, 0.8);\r\n            z-index: 1000;\r\n            justify-content: center;\r\n            align-items: center;\r\n            overflow-y: auto;\r\n            padding: 20px;\r\n        }\r\n\r\n        .modal-content {\r\n            background-color: #1f2937;\r\n            border: 1px solid #374151;\r\n            border-radius: 12px;\r\n            padding: 2rem;\r\n            max-width: 900px;\r\n            width: 100%;\r\n            max-height: 90vh;\r\n            overflow-y: auto;\r\n            position: relative;\r\n            box-shadow: 0 20px 60px rgba(0,0,0,0.8);\r\n        }\r\n\r\n        .modal-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 1.5rem;\r\n            padding-bottom: 1rem;\r\n            border-bottom: 2px solid #374151;\r\n        }\r\n\r\n        .modal-header h2 {\r\n            font-size: 1.8rem;\r\n            color: #ffffff;\r\n            margin: 0;\r\n        }\r\n\r\n        .close-button {\r\n            background: none;\r\n            border: none;\r\n            font-size: 2rem;\r\n            color: #9ca3af;\r\n            cursor: pointer;\r\n            padding: 0;\r\n            width: 40px;\r\n            height: 40px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            border-radius: 50%;\r\n            transition: all 0.2s;\r\n        }\r\n\r\n        .close-button:hover {\r\n            background-color: #374151;\r\n            color: #ffffff;\r\n        }\r\n\r\n        .modal-body {\r\n            color: #ffffff;\r\n        }\r\n\r\n        .detail-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n            gap: 1rem;\r\n            margin-bottom: 1.5rem;\r\n        }\r\n\r\n        .detail-item {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            padding: 1rem;\r\n            border-radius: 8px;\r\n            border-left: 3px solid #667eea;\r\n        }\r\n\r\n        .detail-label {\r\n            font-size: 0.75rem;\r\n            color: #9ca3af;\r\n            text-transform: uppercase;\r\n            letter-spacing: 0.5px;\r\n            margin-bottom: 0.5rem;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .detail-value {\r\n            font-size: 1.1rem;\r\n            color: #ffffff;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .detail-section {\r\n            margin-bottom: 1.5rem;\r\n        }\r\n\r\n        .detail-section h3 {\r\n            font-size: 1.2rem;\r\n            color: #ffffff;\r\n            margin-bottom: 1rem;\r\n            padding-bottom: 0.5rem;\r\n            border-bottom: 2px solid #374151;\r\n        }\r\n\r\n        .credentials-list {\r\n            list-style: none;\r\n            padding: 0;\r\n        }\r\n\r\n        .credentials-item {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            padding: 1rem;\r\n            margin-bottom: 0.75rem;\r\n            border-radius: 8px;\r\n            border-left: 3px solid #28a745;\r\n        }\r\n\r\n        .credentials-item.warning {\r\n            border-left-color: #ffc107;\r\n        }\r\n\r\n        .credentials-item.error {\r\n            border-left-color: #dc3545;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n            body {\r\n                padding: 1rem;\r\n            }\r\n\r\n            .header h1 {\r\n                font-size: 1.8rem;\r\n            }\r\n\r\n            .health-widget {\r\n                padding: 1.5rem;\r\n            }\r\n\r\n            .widget-header {\r\n                flex-direction: column;\r\n                align-items: flex-start;\r\n            }\r\n\r\n            .health-grid {\r\n                grid-template-columns: 1fr;\r\n            }\r\n\r\n            .modal-content {\r\n                padding: 1.5rem;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    {# Query SolarWinds credentials from rda_secrets_meta #}\r\n    {%- set solarwinds_query = \"type is 'solarwinds'\" -%}\r\n    {%- set solarwinds_creds = engine.query_stream_data(\"rda_secrets_meta\", cfxql_query=solarwinds_query, limit=100) -%}\r\n    {%- set solarwinds_configured = solarwinds_creds and solarwinds_creds|length > 0 -%}\r\n\r\n    {# Query LLM credentials from rda_secrets_meta #}\r\n    {%- set llm_query = \"type is 'llm' and name not in ['anthropic','claude-sonnet-4.5','claude-haiku-4.5','claude-haiku-3.5','GPT-4.1-mini','O3-mini']\" -%}\r\n    {%- set llm_creds = engine.query_stream_data(\"rda_secrets_meta\", cfxql_query=llm_query, limit=100) -%}\r\n    {%- set llm_configured_count = llm_creds|length if llm_creds else 0 -%}\r\n\r\n    {# Query agents from rda_orchestrator_flow_meta #}\r\n    {%- set agents_query = \"ai_project_name in ['User_Agents','Admin_Agents'] GET name\" -%}\r\n    {%- set all_agents = engine.query_stream_data(\"rda_orchestrator_flow_meta\", cfxql_query=agents_query, limit=1000) -%}\r\n    \r\n    {# Get all agents with name #}\r\n    {%- set ns = namespace(agent_list=[]) -%}\r\n    {%- if all_agents -%}\r\n        {%- for agent in all_agents -%}\r\n            {%- if agent.name and agent.name != '' -%}\r\n                {%- set _ = ns.agent_list.append(agent) -%}\r\n            {%- endif -%}\r\n        {%- endfor -%}\r\n    {%- endif -%}\r\n    {%- set total_agents = ns.agent_list|length -%}\r\n\r\n    {# Query LLM reachability from chat sessions grouped by 'llm' #}\r\n    {%- set cfxql_pass_query = \"llm is not empty and llm not in ['anthropic','claude-sonnet-4.5','claude-haiku-4.5','claude-haiku-3.5','GPT-4.1-mini', 'O3-mini','20250929'] and llm does not contain 'claude-sonnet-4-5-20250929-v1'\" -%}\r\n    {%- set all_llm_passed = engine.query_stream_aggs(stream=\"rda_chat_sessions\", cfxql_query=cfxql_pass_query, aggs=[{\"field\":\"count_\",\"func\":\"sum\"}], groupby=[\"llm\"], duration_hours=1800000, ts_column=\"timestamp\") -%}\r\n    {%- set llm_names = [] -%}\r\n    {%- if all_llm_passed -%}\r\n        {%- for llm_item in all_llm_passed -%}\r\n            {%- set llm_value = llm_item.get('llm') if llm_item.get('llm') else (llm_item.llm if llm_item.llm else '') -%}\r\n            {%- if llm_value and llm_value != '' -%}\r\n                {%- set _ = llm_names.append(llm_value|string) -%}\r\n            {%- endif -%}\r\n        {%- endfor -%}\r\n    {%- endif -%}\r\n    {%- set llm_reachability_count = llm_names|length -%}\r\n\r\n    {# Calculate overall system status #}\r\n    {%- set overall_status = \"success\" -%}\r\n    {%- set overall_message = \"All Systems Operational\" -%}\r\n    {%- if not solarwinds_configured -%}\r\n        {%- set overall_status = \"error\" -%}\r\n        {%- set overall_message = \"SolarWinds Credentials Not Configured\" -%}\r\n    {%- elif llm_configured_count == 0 -%}\r\n        {%- set overall_status = \"error\" -%}\r\n        {%- set overall_message = \"No LLM Configured\" -%}\r\n    {%- elif total_agents == 0 -%}\r\n        {%- set overall_status = \"warning\" -%}\r\n        {%- set overall_message = \"No Agents Found\" -%}\r\n    {%- endif -%}\r\n\r\n    <div class=\"dashboard-container\">\r\n        <div class=\"header\">\r\n            <h1>\r\n                <span class=\"header-icon\">\ud83e\udd16</span>\r\n                Agentic System Health\r\n            </h1>\r\n            <p>Real-time monitoring and status of your intelligent agent infrastructure</p>\r\n        </div>\r\n\r\n        <div class=\"health-widget\">\r\n            <div class=\"widget-header\">\r\n                <h2 class=\"widget-title\">\r\n                    <span>\u26a1</span>\r\n                    System Overview\r\n                </h2>\r\n                <div class=\"overall-status {{overall_status}}\">\r\n                    <span class=\"status-indicator {{overall_status}}\"></span>\r\n                    <span>{{overall_message}}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"health-grid\">\r\n                <!-- SolarWinds Credentials -->\r\n                <div class=\"health-card {% if not solarwinds_configured %}error{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> SolarWinds Credentials</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{% if solarwinds_configured %}\u2713{% else %}<span style=\"font-size: 1.2rem;\">Not Configured</span>{% endif %}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if solarwinds_configured %}\r\n                            Credentials are properly configured. {{solarwinds_creds|length}} credential(s) found.\r\n                        {% else %}\r\n                            No SolarWinds credentials configured. Please add credentials.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('solarwindsModal')\">View Details</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- LLM Configuration -->\r\n                <div class=\"health-card {% if llm_configured_count == 0 %}error{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> LLM Configuration</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{llm_configured_count}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if llm_configured_count > 0 %}\r\n                            {{llm_configured_count}} LLM model(s) configured and ready.\r\n                        {% else %}\r\n                            No LLM models configured. Add at least one model.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button\" onclick=\"showModal('llmModal')\">View Details</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- LLM Reachability -->\r\n                <!-- DEBUG: Remove after testing -->\r\n                \r\n                <div class=\"health-card\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> LLM Reachability</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{llm_reachability_count}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if llm_reachability_count > 0 %}\r\n                            {{llm_reachability_count}} LLM model(s) found in chat sessions.\r\n                        {% else %}\r\n                            No LLM activity found in chat sessions.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button\" onclick=\"showModal('llmReachabilityModal')\">View Details</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Active Agents -->\r\n                <div class=\"health-card {% if total_agents == 0 %}warning{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> Active Agents</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{total_agents}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if total_agents > 0 %}\r\n                            {{total_agents}} agent(s) found.\r\n                        {% else %}\r\n                            No agents found.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button\" onclick=\"showModal('agentsModal')\">View Details</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <!-- SolarWinds Modal -->\r\n    <div id=\"solarwindsModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2> SolarWinds Credentials</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('solarwindsModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if solarwinds_configured %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Configured Credentials</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for cred in solarwinds_creds -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-label\">Key</div>\r\n                                <div class=\"detail-value\">{{cred.key}}</div>\r\n                                <div class=\"detail-label\" style=\"margin-top: 0.5rem;\">Type</div>\r\n                                <div class=\"detail-value\">{{cred.type}}</div>\r\n                                <div class=\"detail-label\" style=\"margin-top: 0.5rem;\">Status</div>\r\n                                <div class=\"detail-value\" style=\"color: #28a745;\"> Configured</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No SolarWinds credentials configured</p>\r\n                        <p>Please add SolarWinds credentials to enable integration.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- LLM Modal -->\r\n    <div id=\"llmModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83e\udde0 LLM Configuration</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('llmModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if llm_configured_count > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Configured LLM Models</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for llm in llm_creds -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">{{llm.name}}</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No LLM models configured</p>\r\n                        <p>Please add at least one LLM model configuration to enable AI features.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Agents Modal -->\r\n    <div id=\"agentsModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83e\udd16 Agent Management</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('agentsModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if total_agents > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Agent Names</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for agent in ns.agent_list -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">{{agent.name or \"N/A\"}}</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No agents found</p>\r\n                        <p>No agents are configured for User_Agents or Admin_Agents projects.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- LLM Reachability Modal -->\r\n    <div id=\"llmReachabilityModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83c\udf10 LLM Reachability</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('llmReachabilityModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if llm_reachability_count > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>LLM Models Found in Chat Sessions</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for llm_name in llm_names -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">{{llm_name}}</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No LLM activity found</p>\r\n                        <p>No LLM models were found in chat sessions.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        // Modal Functions\r\n        function showModal(modalId) {\r\n            const modal = document.getElementById(modalId);\r\n            if (modal) {\r\n                modal.style.display = 'flex';\r\n                document.body.style.overflow = 'hidden';\r\n            }\r\n        }\r\n\r\n        function hideModal(modalId) {\r\n            const modal = document.getElementById(modalId);\r\n            if (modal) {\r\n                modal.style.display = 'none';\r\n                document.body.style.overflow = '';\r\n            }\r\n        }\r\n\r\n        // Close modal when clicking outside\r\n        window.addEventListener('click', function(event) {\r\n            if (event.target.classList.contains('modal')) {\r\n                hideModal(event.target.id);\r\n            }\r\n        });\r\n\r\n        // Close modal on Escape key\r\n        document.addEventListener('keydown', function(event) {\r\n            if (event.key === 'Escape') {\r\n                const modals = document.querySelectorAll('.modal');\r\n                modals.forEach(function(modal) {\r\n                    if (modal.style.display === 'flex') {\r\n                        hideModal(modal.id);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n"
        },
        {
            "name": "health.html_bkp",
            "value": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Agentic System Health Dashboard</title>\r\n    <style>\r\n        * {\r\n            margin: 0;\r\n            padding: 0;\r\n            box-sizing: border-box;\r\n        }\r\n\r\n        body {\r\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\r\n            background: #000000;\r\n            min-height: 100vh;\r\n            padding: 2rem;\r\n            color: #ffffff;\r\n        }\r\n\r\n        .dashboard-container {\r\n            max-width: 1200px;\r\n            margin: 0 auto;\r\n        }\r\n\r\n        .header {\r\n            text-align: center;\r\n            color: #ffffff;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .header h1 {\r\n            font-size: 2.5rem;\r\n            margin-bottom: 0.5rem;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            gap: 1rem;\r\n        }\r\n\r\n        .header-icon {\r\n            font-size: 3rem;\r\n            animation: float 3s ease-in-out infinite;\r\n        }\r\n\r\n        @keyframes float {\r\n            0%, 100% { transform: translateY(0px); }\r\n            50% { transform: translateY(-10px); }\r\n        }\r\n\r\n        .header p {\r\n            opacity: 0.95;\r\n            font-size: 1.1rem;\r\n        }\r\n\r\n        .health-widget {\r\n            background: #1f2937;\r\n            border: 1px solid #374151;\r\n            border-radius: 16px;\r\n            box-shadow: 0 20px 60px rgba(0,0,0,0.5);\r\n            padding: 2.5rem;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .widget-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 2rem;\r\n            padding-bottom: 1.5rem;\r\n            border-bottom: 3px solid #374151;\r\n            flex-wrap: wrap;\r\n            gap: 1rem;\r\n        }\r\n\r\n        .widget-title {\r\n            font-size: 1.8rem;\r\n            font-weight: 700;\r\n            color: #ffffff;\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.5rem;\r\n        }\r\n\r\n        .overall-status {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.75rem;\r\n            padding: 0.75rem 1.5rem;\r\n            background: #d4edda;\r\n            color: #155724;\r\n            border-radius: 25px;\r\n            font-weight: 600;\r\n            font-size: 1rem;\r\n            box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n            transition: all 0.3s ease;\r\n        }\r\n\r\n        .overall-status:hover {\r\n            transform: scale(1.05);\r\n        }\r\n\r\n        .overall-status.warning {\r\n            background: #fff3cd;\r\n            color: #856404;\r\n        }\r\n\r\n        .overall-status.error {\r\n            background: #f8d7da;\r\n            color: #721c24;\r\n        }\r\n\r\n        .status-indicator {\r\n            width: 12px;\r\n            height: 12px;\r\n            border-radius: 50%;\r\n            background: #28a745;\r\n            animation: pulse 2s infinite;\r\n            box-shadow: 0 0 10px rgba(40, 167, 69, 0.5);\r\n        }\r\n\r\n        .status-indicator.warning {\r\n            background: #ffc107;\r\n            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);\r\n        }\r\n\r\n        .status-indicator.error {\r\n            background: #dc3545;\r\n            box-shadow: 0 0 10px rgba(220, 53, 69, 0.5);\r\n        }\r\n\r\n        @keyframes pulse {\r\n            0%, 100% { \r\n                opacity: 1;\r\n                transform: scale(1);\r\n            }\r\n            50% { \r\n                opacity: 0.6;\r\n                transform: scale(1.2);\r\n            }\r\n        }\r\n\r\n        .health-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(2, 1fr);\r\n            gap: 1.5rem;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .health-card {\r\n            background: #111827;\r\n            border-radius: 12px;\r\n            padding: 1.75rem;\r\n            border: 1px solid #374151;\r\n            border-left: 5px solid #28a745;\r\n            transition: all 0.3s ease;\r\n            position: relative;\r\n            overflow: hidden;\r\n        }\r\n\r\n        .health-card::before {\r\n            content: '';\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            width: 100px;\r\n            height: 100px;\r\n            background: radial-gradient(circle, rgba(102, 126, 234, 0.05) 0%, transparent 70%);\r\n            border-radius: 50%;\r\n            transform: translate(30%, -30%);\r\n        }\r\n\r\n        .health-card:hover {\r\n            transform: translateY(-5px);\r\n            box-shadow: 0 8px 24px rgba(0,0,0,0.15);\r\n        }\r\n\r\n        .health-card.warning {\r\n            border-left-color: #ffc107;\r\n        }\r\n\r\n        .health-card.error {\r\n            border-left-color: #dc3545;\r\n        }\r\n\r\n        .card-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: flex-start;\r\n            margin-bottom: 1.25rem;\r\n        }\r\n\r\n        .card-title {\r\n            font-size: 0.85rem;\r\n            color: #9ca3af;\r\n            font-weight: 600;\r\n            text-transform: uppercase;\r\n            letter-spacing: 1px;\r\n        }\r\n\r\n        .card-status {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.5rem;\r\n            font-size: 0.8rem;\r\n            font-weight: 700;\r\n            padding: 0.25rem 0.75rem;\r\n            border-radius: 12px;\r\n            background: rgba(40, 167, 69, 0.1);\r\n        }\r\n\r\n        .card-status.success {\r\n            color: #28a745;\r\n        }\r\n\r\n        .card-status.warning {\r\n            color: #ffc107;\r\n            background: rgba(255, 193, 7, 0.1);\r\n        }\r\n\r\n        .card-status.error {\r\n            color: #dc3545;\r\n            background: rgba(220, 53, 69, 0.1);\r\n        }\r\n\r\n        .card-icon {\r\n            width: 16px;\r\n            height: 16px;\r\n        }\r\n\r\n        .card-value {\r\n            font-size: 2.5rem;\r\n            font-weight: 800;\r\n            color: #ffffff;\r\n            margin-bottom: 0.75rem;\r\n            line-height: 1;\r\n        }\r\n\r\n        .card-description {\r\n            font-size: 0.9rem;\r\n            color: #9ca3af;\r\n            line-height: 1.5;\r\n            margin-bottom: 1rem;\r\n        }\r\n\r\n        .card-meta {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            font-size: 0.75rem;\r\n            color: #6b7280;\r\n            padding-top: 0.75rem;\r\n            border-top: 1px solid #374151;\r\n        }\r\n\r\n        .action-button {\r\n            padding: 0.6rem 1.25rem;\r\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n            color: white;\r\n            border: none;\r\n            border-radius: 8px;\r\n            font-size: 0.85rem;\r\n            font-weight: 600;\r\n            cursor: pointer;\r\n            transition: all 0.3s ease;\r\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\r\n        }\r\n\r\n        .action-button:hover {\r\n            transform: translateY(-2px);\r\n            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);\r\n        }\r\n\r\n        .action-button:active {\r\n            transform: translateY(0);\r\n        }\r\n\r\n        .action-button.secondary {\r\n            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\r\n            box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);\r\n        }\r\n\r\n        .action-button.secondary:hover {\r\n            box-shadow: 0 6px 16px rgba(108, 117, 125, 0.4);\r\n        }\r\n\r\n        .summary-stats {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\r\n            gap: 1.25rem;\r\n        }\r\n\r\n        .stat-card {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            border-radius: 12px;\r\n            padding: 1.5rem;\r\n            box-shadow: 0 4px 12px rgba(0,0,0,0.3);\r\n            transition: all 0.3s ease;\r\n            border-top: 4px solid #667eea;\r\n        }\r\n\r\n        .stat-card:hover {\r\n            transform: translateY(-3px);\r\n            box-shadow: 0 6px 16px rgba(0,0,0,0.15);\r\n        }\r\n\r\n        .stat-card:nth-child(2) {\r\n            border-top-color: #ffc107;\r\n        }\r\n\r\n        .stat-label {\r\n            font-size: 0.85rem;\r\n            color: #9ca3af;\r\n            margin-bottom: 0.75rem;\r\n            font-weight: 600;\r\n            text-transform: uppercase;\r\n            letter-spacing: 0.5px;\r\n        }\r\n\r\n        .stat-value {\r\n            font-size: 2rem;\r\n            font-weight: 800;\r\n            color: #ffffff;\r\n            display: flex;\r\n            align-items: baseline;\r\n            gap: 0.5rem;\r\n        }\r\n\r\n        .stat-unit {\r\n            font-size: 1rem;\r\n            color: #9ca3af;\r\n            font-weight: 500;\r\n        }\r\n\r\n\r\n        /* Modal Styles */\r\n        .modal {\r\n            display: none;\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            background-color: rgba(0, 0, 0, 0.8);\r\n            z-index: 1000;\r\n            justify-content: center;\r\n            align-items: center;\r\n            overflow-y: auto;\r\n            padding: 20px;\r\n        }\r\n\r\n        .modal-content {\r\n            background-color: #1f2937;\r\n            border: 1px solid #374151;\r\n            border-radius: 12px;\r\n            padding: 2rem;\r\n            max-width: 900px;\r\n            width: 100%;\r\n            max-height: 90vh;\r\n            overflow-y: auto;\r\n            position: relative;\r\n            box-shadow: 0 20px 60px rgba(0,0,0,0.8);\r\n        }\r\n\r\n        .modal-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 1.5rem;\r\n            padding-bottom: 1rem;\r\n            border-bottom: 2px solid #374151;\r\n        }\r\n\r\n        .modal-header h2 {\r\n            font-size: 1.8rem;\r\n            color: #ffffff;\r\n            margin: 0;\r\n        }\r\n\r\n        .close-button {\r\n            background: none;\r\n            border: none;\r\n            font-size: 2rem;\r\n            color: #9ca3af;\r\n            cursor: pointer;\r\n            padding: 0;\r\n            width: 40px;\r\n            height: 40px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            border-radius: 50%;\r\n            transition: all 0.2s;\r\n        }\r\n\r\n        .close-button:hover {\r\n            background-color: #374151;\r\n            color: #ffffff;\r\n        }\r\n\r\n        .modal-body {\r\n            color: #ffffff;\r\n        }\r\n\r\n        .detail-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n            gap: 1rem;\r\n            margin-bottom: 1.5rem;\r\n        }\r\n\r\n        .detail-item {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            padding: 1rem;\r\n            border-radius: 8px;\r\n            border-left: 3px solid #667eea;\r\n        }\r\n\r\n        .detail-label {\r\n            font-size: 0.75rem;\r\n            color: #9ca3af;\r\n            text-transform: uppercase;\r\n            letter-spacing: 0.5px;\r\n            margin-bottom: 0.5rem;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .detail-value {\r\n            font-size: 1.1rem;\r\n            color: #ffffff;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .detail-section {\r\n            margin-bottom: 1.5rem;\r\n        }\r\n\r\n        .detail-section h3 {\r\n            font-size: 1.2rem;\r\n            color: #ffffff;\r\n            margin-bottom: 1rem;\r\n            padding-bottom: 0.5rem;\r\n            border-bottom: 2px solid #374151;\r\n        }\r\n\r\n        .credentials-list {\r\n            list-style: none;\r\n            padding: 0;\r\n        }\r\n\r\n        .credentials-item {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            padding: 1rem;\r\n            margin-bottom: 0.75rem;\r\n            border-radius: 8px;\r\n            border-left: 3px solid #28a745;\r\n        }\r\n\r\n        .credentials-item.warning {\r\n            border-left-color: #ffc107;\r\n        }\r\n\r\n        .credentials-item.error {\r\n            border-left-color: #dc3545;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n            body {\r\n                padding: 1rem;\r\n            }\r\n\r\n            .header h1 {\r\n                font-size: 1.8rem;\r\n            }\r\n\r\n            .health-widget {\r\n                padding: 1.5rem;\r\n            }\r\n\r\n            .widget-header {\r\n                flex-direction: column;\r\n                align-items: flex-start;\r\n            }\r\n\r\n            .health-grid {\r\n                grid-template-columns: 1fr;\r\n            }\r\n\r\n            .modal-content {\r\n                padding: 1.5rem;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    {# Query SolarWinds credentials from rda_secrets_meta #}\r\n    {%- set solarwinds_query = \"type is 'solarwinds'\" -%}\r\n    {%- set solarwinds_creds = engine.query_stream_data(\"rda_secrets_meta\", cfxql_query=solarwinds_query, limit=100) -%}\r\n    {%- set solarwinds_configured = solarwinds_creds and solarwinds_creds|length > 0 -%}\r\n\r\n    {# Query LLM credentials from rda_secrets_meta #}\r\n    {%- set llm_query = \"type is 'llm' and name not in ['anthropic','claude-sonnet-4.5','claude-haiku-4.5','claude-haiku-3.5','GPT-4.1-mini','O3-mini']\" -%}\r\n    {%- set llm_creds = engine.query_stream_data(\"rda_secrets_meta\", cfxql_query=llm_query, limit=100) -%}\r\n    {%- set llm_configured_count = llm_creds|length if llm_creds else 0 -%}\r\n\r\n    {# Query agents from rda_orchestrator_flow_meta #}\r\n    {%- set agents_query = \"ai_project_name in ['User_Agents','Admin_Agents'] GET name\" -%}\r\n    {%- set all_agents = engine.query_stream_data(\"rda_orchestrator_flow_meta\", cfxql_query=agents_query, limit=1000) -%}\r\n    \r\n    {# Get all agents with name #}\r\n    {%- set ns = namespace(agent_list=[]) -%}\r\n    {%- if all_agents -%}\r\n        {%- for agent in all_agents -%}\r\n            {%- if agent.name and agent.name != '' -%}\r\n                {%- set _ = ns.agent_list.append(agent) -%}\r\n            {%- endif -%}\r\n        {%- endfor -%}\r\n    {%- endif -%}\r\n    {%- set total_agents = ns.agent_list|length -%}\r\n\r\n    {# Query LLM reachability from healthcheck_stream #}\r\n    {%- set healthcheck_query = \"healthcheck is 'success' and status is 'success'\" -%}\r\n    {%- set healthcheck_data = engine.query_stream_aggs(stream=\"healthchecks_stream\", cfxql_query=healthcheck_query, aggs=[{\"field\":\"count_\",\"func\":\"sum\"}], groupby=[\"llm\"], duration_hours=720, ts_column=\"timestamp\") -%}\r\n    {%- set llm_names = [] -%}\r\n    {%- if healthcheck_data -%}\r\n        {%- for llm_item in healthcheck_data -%}\r\n            {%- set llm_value = llm_item.get('llm') if llm_item.get('llm') else (llm_item.llm if llm_item.llm else '') -%}\r\n            {%- if llm_value and llm_value != '' -%}\r\n                {%- set _ = llm_names.append(llm_value|string) -%}\r\n            {%- endif -%}\r\n        {%- endfor -%}\r\n    {%- endif -%}\r\n    {%- set llm_reachability_count = llm_names|length -%}\r\n\r\n    {# Calculate overall system status #}\r\n    {%- set overall_status = \"success\" -%}\r\n    {%- set overall_message = \"All Systems Operational\" -%}\r\n    {%- if not solarwinds_configured -%}\r\n        {%- set overall_status = \"error\" -%}\r\n        {%- set overall_message = \"SolarWinds Credentials Not Configured\" -%}\r\n    {%- elif llm_configured_count == 0 -%}\r\n        {%- set overall_status = \"error\" -%}\r\n        {%- set overall_message = \"No LLM Configured\" -%}\r\n    {%- elif total_agents == 0 -%}\r\n        {%- set overall_status = \"warning\" -%}\r\n        {%- set overall_message = \"No Agents Found\" -%}\r\n    {%- endif -%}\r\n\r\n    <div class=\"dashboard-container\">\r\n        <div class=\"header\">\r\n            <h1>\r\n                <span class=\"header-icon\">\ud83e\udd16</span>\r\n                Agentic System Health\r\n            </h1>\r\n            <p>Real-time monitoring and status of your intelligent agent infrastructure</p>\r\n        </div>\r\n\r\n        <div class=\"health-widget\">\r\n            <div class=\"widget-header\">\r\n                <h2 class=\"widget-title\">\r\n                    <span>\u26a1</span>\r\n                    System Overview\r\n                </h2>\r\n                <div class=\"overall-status {{overall_status}}\">\r\n                    <span class=\"status-indicator {{overall_status}}\"></span>\r\n                    <span>{{overall_message}}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"health-grid\">\r\n                <!-- SolarWinds Credentials -->\r\n                <div class=\"health-card {% if not solarwinds_configured %}error{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> SolarWinds Credentials</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{% if solarwinds_configured %}\u2713{% else %}<span style=\"font-size: 1.2rem;\">Not Configured</span>{% endif %}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if solarwinds_configured %}\r\n                            Credentials are properly configured. {{solarwinds_creds|length}} credential(s) found.\r\n                        {% else %}\r\n                            No SolarWinds credentials configured. Please add credentials.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('solarwindsModal')\">View Details</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- LLM Configuration -->\r\n                <div class=\"health-card {% if llm_configured_count == 0 %}error{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> LLM Configuration</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{llm_configured_count}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if llm_configured_count > 0 %}\r\n                            {{llm_configured_count}} LLM model(s) configured and ready.\r\n                        {% else %}\r\n                            No LLM models configured. Add at least one model.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('llmModal')\">View Configured Models</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- LLM Reachability -->\r\n                <div class=\"health-card\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> LLM Reachability</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{llm_reachability_count}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if llm_reachability_count > 0 %}\r\n                            {{llm_reachability_count}} LLM model(s) are reachable and healthy.\r\n                        {% else %}\r\n                            No healthy LLM connections found.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('llmReachabilityModal')\">View Details</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Active Agents -->\r\n                <div class=\"health-card {% if total_agents == 0 %}warning{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> Active Agents</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{total_agents}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if total_agents > 0 %}\r\n                            {{total_agents}} agent(s) found.\r\n                        {% else %}\r\n                            No agents found.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('agentsModal')\">View Active Agents</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <!-- SolarWinds Modal -->\r\n    <div id=\"solarwindsModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2> SolarWinds Credentials</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('solarwindsModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if solarwinds_configured %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Configured Credentials</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for cred in solarwinds_creds -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-label\">Key</div>\r\n                                <div class=\"detail-value\">{{cred.key}}</div>\r\n                                <div class=\"detail-label\" style=\"margin-top: 0.5rem;\">Type</div>\r\n                                <div class=\"detail-value\">{{cred.type}}</div>\r\n                                <div class=\"detail-label\" style=\"margin-top: 0.5rem;\">Status</div>\r\n                                <div class=\"detail-value\" style=\"color: #28a745;\"> Configured</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No SolarWinds credentials configured</p>\r\n                        <p>Please add SolarWinds credentials to enable integration.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- LLM Modal -->\r\n    <div id=\"llmModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83e\udde0 LLM Configuration</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('llmModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if llm_configured_count > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Configured LLM Models</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for llm in llm_creds -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">{{llm.name}}</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No LLM models configured</p>\r\n                        <p>Please add at least one LLM model configuration to enable AI features.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Agents Modal -->\r\n    <div id=\"agentsModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83e\udd16 Agent Management</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('agentsModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if total_agents > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Agent Names</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for agent in ns.agent_list -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">{{agent.name or \"N/A\"}}</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No agents found</p>\r\n                        <p>No agents are configured for User_Agents or Admin_Agents projects.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- LLM Reachability Modal -->\r\n    <div id=\"llmReachabilityModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83c\udf10 LLM Reachability</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('llmReachabilityModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if llm_reachability_count > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Healthy LLM Models (Last 30 Days)</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for llm_name in llm_names -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">{{llm_name}}</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No healthy LLM connections found</p>\r\n                        <p>No LLM models passed health checks in the last 30 days.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        // Modal Functions\r\n        function showModal(modalId) {\r\n            const modal = document.getElementById(modalId);\r\n            if (modal) {\r\n                modal.style.display = 'flex';\r\n                document.body.style.overflow = 'hidden';\r\n            }\r\n        }\r\n\r\n        function hideModal(modalId) {\r\n            const modal = document.getElementById(modalId);\r\n            if (modal) {\r\n                modal.style.display = 'none';\r\n                document.body.style.overflow = '';\r\n            }\r\n        }\r\n\r\n        // Close modal when clicking outside\r\n        window.addEventListener('click', function(event) {\r\n            if (event.target.classList.contains('modal')) {\r\n                hideModal(event.target.id);\r\n            }\r\n        });\r\n\r\n        // Close modal on Escape key\r\n        document.addEventListener('keydown', function(event) {\r\n            if (event.key === 'Escape') {\r\n                const modals = document.querySelectorAll('.modal');\r\n                modals.forEach(function(modal) {\r\n                    if (modal.style.display === 'flex') {\r\n                        hideModal(modal.id);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n"
        },
        {
            "name": "health.html_bkp_2",
            "value": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Agentic System Health Dashboard</title>\r\n    <style>\r\n        * {\r\n            margin: 0;\r\n            padding: 0;\r\n            box-sizing: border-box;\r\n        }\r\n\r\n        body {\r\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\r\n            background: #000000;\r\n            min-height: 100vh;\r\n            padding: 2rem;\r\n            color: #ffffff;\r\n        }\r\n\r\n        .dashboard-container {\r\n            max-width: 1200px;\r\n            margin: 0 auto;\r\n        }\r\n\r\n        .header {\r\n            text-align: center;\r\n            color: #ffffff;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .header h1 {\r\n            font-size: 2.5rem;\r\n            margin-bottom: 0.5rem;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            gap: 1rem;\r\n        }\r\n\r\n        .header-icon {\r\n            font-size: 3rem;\r\n            animation: float 3s ease-in-out infinite;\r\n        }\r\n\r\n        @keyframes float {\r\n            0%, 100% { transform: translateY(0px); }\r\n            50% { transform: translateY(-10px); }\r\n        }\r\n\r\n        .header p {\r\n            opacity: 0.95;\r\n            font-size: 1.1rem;\r\n        }\r\n\r\n        .health-widget {\r\n            background: #1f2937;\r\n            border: 1px solid #374151;\r\n            border-radius: 16px;\r\n            box-shadow: 0 20px 60px rgba(0,0,0,0.5);\r\n            padding: 2.5rem;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .widget-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 2rem;\r\n            padding-bottom: 1.5rem;\r\n            border-bottom: 3px solid #374151;\r\n            flex-wrap: wrap;\r\n            gap: 1rem;\r\n        }\r\n\r\n        .widget-title {\r\n            font-size: 1.8rem;\r\n            font-weight: 700;\r\n            color: #ffffff;\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.5rem;\r\n        }\r\n\r\n        .overall-status {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.75rem;\r\n            padding: 0.75rem 1.5rem;\r\n            background: #d4edda;\r\n            color: #155724;\r\n            border-radius: 25px;\r\n            font-weight: 600;\r\n            font-size: 1rem;\r\n            box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n            transition: all 0.3s ease;\r\n        }\r\n\r\n        .overall-status:hover {\r\n            transform: scale(1.05);\r\n        }\r\n\r\n        .overall-status.warning {\r\n            background: #fff3cd;\r\n            color: #856404;\r\n        }\r\n\r\n        .overall-status.error {\r\n            background: #f8d7da;\r\n            color: #721c24;\r\n        }\r\n\r\n        .status-indicator {\r\n            width: 12px;\r\n            height: 12px;\r\n            border-radius: 50%;\r\n            background: #28a745;\r\n            animation: pulse 2s infinite;\r\n            box-shadow: 0 0 10px rgba(40, 167, 69, 0.5);\r\n        }\r\n\r\n        .status-indicator.warning {\r\n            background: #ffc107;\r\n            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);\r\n        }\r\n\r\n        .status-indicator.error {\r\n            background: #dc3545;\r\n            box-shadow: 0 0 10px rgba(220, 53, 69, 0.5);\r\n        }\r\n\r\n        @keyframes pulse {\r\n            0%, 100% { \r\n                opacity: 1;\r\n                transform: scale(1);\r\n            }\r\n            50% { \r\n                opacity: 0.6;\r\n                transform: scale(1.2);\r\n            }\r\n        }\r\n\r\n        .health-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(2, 1fr);\r\n            gap: 1.5rem;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .health-card {\r\n            background: #111827;\r\n            border-radius: 12px;\r\n            padding: 1.75rem;\r\n            border: 1px solid #374151;\r\n            border-left: 5px solid #28a745;\r\n            transition: all 0.3s ease;\r\n            position: relative;\r\n            overflow: hidden;\r\n        }\r\n\r\n        .health-card::before {\r\n            content: '';\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            width: 100px;\r\n            height: 100px;\r\n            background: radial-gradient(circle, rgba(102, 126, 234, 0.05) 0%, transparent 70%);\r\n            border-radius: 50%;\r\n            transform: translate(30%, -30%);\r\n        }\r\n\r\n        .health-card:hover {\r\n            transform: translateY(-5px);\r\n            box-shadow: 0 8px 24px rgba(0,0,0,0.15);\r\n        }\r\n\r\n        .health-card.warning {\r\n            border-left-color: #ffc107;\r\n        }\r\n\r\n        .health-card.error {\r\n            border-left-color: #dc3545;\r\n        }\r\n\r\n        .card-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: flex-start;\r\n            margin-bottom: 1.25rem;\r\n        }\r\n\r\n        .card-title {\r\n            font-size: 0.85rem;\r\n            color: #9ca3af;\r\n            font-weight: 600;\r\n            text-transform: uppercase;\r\n            letter-spacing: 1px;\r\n        }\r\n\r\n        .card-status {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.5rem;\r\n            font-size: 0.8rem;\r\n            font-weight: 700;\r\n            padding: 0.25rem 0.75rem;\r\n            border-radius: 12px;\r\n            background: rgba(40, 167, 69, 0.1);\r\n        }\r\n\r\n        .card-status.success {\r\n            color: #28a745;\r\n        }\r\n\r\n        .card-status.warning {\r\n            color: #ffc107;\r\n            background: rgba(255, 193, 7, 0.1);\r\n        }\r\n\r\n        .card-status.error {\r\n            color: #dc3545;\r\n            background: rgba(220, 53, 69, 0.1);\r\n        }\r\n\r\n        .card-icon {\r\n            width: 16px;\r\n            height: 16px;\r\n        }\r\n\r\n        .card-value {\r\n            font-size: 2.5rem;\r\n            font-weight: 800;\r\n            color: #ffffff;\r\n            margin-bottom: 0.75rem;\r\n            line-height: 1;\r\n        }\r\n\r\n        .card-description {\r\n            font-size: 0.9rem;\r\n            color: #9ca3af;\r\n            line-height: 1.5;\r\n            margin-bottom: 1rem;\r\n        }\r\n\r\n        .card-meta {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            font-size: 0.75rem;\r\n            color: #6b7280;\r\n            padding-top: 0.75rem;\r\n            border-top: 1px solid #374151;\r\n        }\r\n\r\n        .action-button {\r\n            padding: 0.6rem 1.25rem;\r\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n            color: white;\r\n            border: none;\r\n            border-radius: 8px;\r\n            font-size: 0.85rem;\r\n            font-weight: 600;\r\n            cursor: pointer;\r\n            transition: all 0.3s ease;\r\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\r\n        }\r\n\r\n        .action-button:hover {\r\n            transform: translateY(-2px);\r\n            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);\r\n        }\r\n\r\n        .action-button:active {\r\n            transform: translateY(0);\r\n        }\r\n\r\n        .action-button.secondary {\r\n            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\r\n            box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);\r\n        }\r\n\r\n        .action-button.secondary:hover {\r\n            box-shadow: 0 6px 16px rgba(108, 117, 125, 0.4);\r\n        }\r\n\r\n        .summary-stats {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\r\n            gap: 1.25rem;\r\n        }\r\n\r\n        .stat-card {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            border-radius: 12px;\r\n            padding: 1.5rem;\r\n            box-shadow: 0 4px 12px rgba(0,0,0,0.3);\r\n            transition: all 0.3s ease;\r\n            border-top: 4px solid #667eea;\r\n        }\r\n\r\n        .stat-card:hover {\r\n            transform: translateY(-3px);\r\n            box-shadow: 0 6px 16px rgba(0,0,0,0.15);\r\n        }\r\n\r\n        .stat-card:nth-child(2) {\r\n            border-top-color: #ffc107;\r\n        }\r\n\r\n        .stat-label {\r\n            font-size: 0.85rem;\r\n            color: #9ca3af;\r\n            margin-bottom: 0.75rem;\r\n            font-weight: 600;\r\n            text-transform: uppercase;\r\n            letter-spacing: 0.5px;\r\n        }\r\n\r\n        .stat-value {\r\n            font-size: 2rem;\r\n            font-weight: 800;\r\n            color: #ffffff;\r\n            display: flex;\r\n            align-items: baseline;\r\n            gap: 0.5rem;\r\n        }\r\n\r\n        .stat-unit {\r\n            font-size: 1rem;\r\n            color: #9ca3af;\r\n            font-weight: 500;\r\n        }\r\n\r\n\r\n        /* Modal Styles */\r\n        .modal {\r\n            display: none;\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            background-color: rgba(0, 0, 0, 0.8);\r\n            z-index: 1000;\r\n            justify-content: center;\r\n            align-items: center;\r\n            overflow-y: auto;\r\n            padding: 20px;\r\n        }\r\n\r\n        .modal-content {\r\n            background-color: #1f2937;\r\n            border: 1px solid #374151;\r\n            border-radius: 12px;\r\n            padding: 2rem;\r\n            max-width: 900px;\r\n            width: 100%;\r\n            max-height: 90vh;\r\n            overflow-y: auto;\r\n            position: relative;\r\n            box-shadow: 0 20px 60px rgba(0,0,0,0.8);\r\n        }\r\n\r\n        .modal-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 1.5rem;\r\n            padding-bottom: 1rem;\r\n            border-bottom: 2px solid #374151;\r\n        }\r\n\r\n        .modal-header h2 {\r\n            font-size: 1.8rem;\r\n            color: #ffffff;\r\n            margin: 0;\r\n        }\r\n\r\n        .close-button {\r\n            background: none;\r\n            border: none;\r\n            font-size: 2rem;\r\n            color: #9ca3af;\r\n            cursor: pointer;\r\n            padding: 0;\r\n            width: 40px;\r\n            height: 40px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            border-radius: 50%;\r\n            transition: all 0.2s;\r\n        }\r\n\r\n        .close-button:hover {\r\n            background-color: #374151;\r\n            color: #ffffff;\r\n        }\r\n\r\n        .modal-body {\r\n            color: #ffffff;\r\n        }\r\n\r\n        .detail-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n            gap: 1rem;\r\n            margin-bottom: 1.5rem;\r\n        }\r\n\r\n        .detail-item {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            padding: 1rem;\r\n            border-radius: 8px;\r\n            border-left: 3px solid #667eea;\r\n        }\r\n\r\n        .detail-label {\r\n            font-size: 0.75rem;\r\n            color: #9ca3af;\r\n            text-transform: uppercase;\r\n            letter-spacing: 0.5px;\r\n            margin-bottom: 0.5rem;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .detail-value {\r\n            font-size: 1.1rem;\r\n            color: #ffffff;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .detail-section {\r\n            margin-bottom: 1.5rem;\r\n        }\r\n\r\n        .detail-section h3 {\r\n            font-size: 1.2rem;\r\n            color: #ffffff;\r\n            margin-bottom: 1rem;\r\n            padding-bottom: 0.5rem;\r\n            border-bottom: 2px solid #374151;\r\n        }\r\n\r\n        .credentials-list {\r\n            list-style: none;\r\n            padding: 0;\r\n        }\r\n\r\n        .credentials-item {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            padding: 1rem;\r\n            margin-bottom: 0.75rem;\r\n            border-radius: 8px;\r\n            border-left: 3px solid #28a745;\r\n        }\r\n\r\n        .credentials-item.warning {\r\n            border-left-color: #ffc107;\r\n        }\r\n\r\n        .credentials-item.error {\r\n            border-left-color: #dc3545;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n            body {\r\n                padding: 1rem;\r\n            }\r\n\r\n            .header h1 {\r\n                font-size: 1.8rem;\r\n            }\r\n\r\n            .health-widget {\r\n                padding: 1.5rem;\r\n            }\r\n\r\n            .widget-header {\r\n                flex-direction: column;\r\n                align-items: flex-start;\r\n            }\r\n\r\n            .health-grid {\r\n                grid-template-columns: 1fr;\r\n            }\r\n\r\n            .modal-content {\r\n                padding: 1.5rem;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    {# Query SolarWinds credentials from rda_secrets_meta #}\r\n    {%- set solarwinds_query = \"type is 'solarwinds'\" -%}\r\n    {%- set solarwinds_creds = engine.query_stream_data(\"rda_secrets_meta\", cfxql_query=solarwinds_query, limit=100) -%}\r\n    {%- set solarwinds_configured = solarwinds_creds and solarwinds_creds|length > 0 -%}\r\n\r\n    {# Query LLM credentials from rda_secrets_meta #}\r\n    {%- set llm_query = \"type is 'llm' and name not in ['anthropic','claude-sonnet-4.5','claude-haiku-4.5','claude-haiku-3.5','GPT-4.1-mini','O3-mini']\" -%}\r\n    {%- set llm_creds = engine.query_stream_data(\"rda_secrets_meta\", cfxql_query=llm_query, limit=100) -%}\r\n    {%- set llm_configured_count = llm_creds|length if llm_creds else 0 -%}\r\n\r\n    {# Query agents from rda_orchestrator_flow_meta #}\r\n    {%- set agents_query = \"ai_project_name in ['solarwinds'] GET name\" -%}\r\n    {%- set all_agents = engine.query_stream_data(\"rda_orchestrator_flow_meta\", cfxql_query=agents_query, limit=1000) -%}\r\n    \r\n    {# Get all agents with name #}\r\n    {%- set ns = namespace(agent_list=[]) -%}\r\n    {%- if all_agents -%}\r\n        {%- for agent in all_agents -%}\r\n            {%- if agent.name and agent.name != '' -%}\r\n                {%- set _ = ns.agent_list.append(agent) -%}\r\n            {%- endif -%}\r\n        {%- endfor -%}\r\n    {%- endif -%}\r\n    {%- set total_agents = ns.agent_list|length -%}\r\n\r\n    {# Query LLM reachability from healthcheck_stream #}\r\n    {%- set healthcheck_query = \"healthcheck is 'success' and status is 'success'\" -%}\r\n    {%- set healthcheck_data = engine.query_stream_aggs(stream=\"healthchecks_stream\", cfxql_query=healthcheck_query, aggs=[{\"field\":\"count_\",\"func\":\"sum\"}], groupby=[\"llm\"], duration_hours=720, ts_column=\"timestamp\") -%}\r\n    {%- set llm_names = [] -%}\r\n    {%- if healthcheck_data -%}\r\n        {%- for llm_item in healthcheck_data -%}\r\n            {%- set llm_value = llm_item.get('llm') if llm_item.get('llm') else (llm_item.llm if llm_item.llm else '') -%}\r\n            {%- if llm_value and llm_value != '' -%}\r\n                {%- set _ = llm_names.append(llm_value|string) -%}\r\n            {%- endif -%}\r\n        {%- endfor -%}\r\n    {%- endif -%}\r\n    {%- set llm_reachability_count = llm_names|length -%}\r\n\r\n    {# Calculate overall system status #}\r\n    {%- set overall_status = \"success\" -%}\r\n    {%- set overall_message = \"All Systems Operational\" -%}\r\n    {%- if not solarwinds_configured -%}\r\n        {%- set overall_status = \"error\" -%}\r\n        {%- set overall_message = \"SolarWinds Credentials Not Configured\" -%}\r\n    {%- elif llm_configured_count == 0 -%}\r\n        {%- set overall_status = \"error\" -%}\r\n        {%- set overall_message = \"No LLM Configured\" -%}\r\n    {%- elif total_agents == 0 -%}\r\n        {%- set overall_status = \"warning\" -%}\r\n        {%- set overall_message = \"No Agents Found\" -%}\r\n    {%- endif -%}\r\n\r\n    <div class=\"dashboard-container\">\r\n        <div class=\"header\">\r\n            <h1>\r\n                <span class=\"header-icon\">\ud83e\udd16</span>\r\n                Agentic System Health\r\n            </h1>\r\n            <p>Real-time monitoring and status of your intelligent agent infrastructure</p>\r\n        </div>\r\n\r\n        <div class=\"health-widget\">\r\n            <div class=\"widget-header\">\r\n                <h2 class=\"widget-title\">\r\n                    <span>\u26a1</span>\r\n                    System Overview\r\n                </h2>\r\n                <div class=\"overall-status {{overall_status}}\">\r\n                    <span class=\"status-indicator {{overall_status}}\"></span>\r\n                    <span>{{overall_message}}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"health-grid\">\r\n                <!-- SolarWinds Credentials -->\r\n                <div class=\"health-card {% if not solarwinds_configured %}error{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> SolarWinds Credentials</span>\r\n                    </div>\r\n                    <div class=\"card-value\">\r\n                        {% if solarwinds_configured %}\r\n                            <span style=\"font-size: 1.5rem; color: #28a745;\">Configured</span>\r\n                        {% else %}\r\n                            <span style=\"font-size: 1.5rem; color: #dc3545;\">Not Configured</span>\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-description\">\r\n                        {% if solarwinds_configured %}\r\n                            Credentials are properly configured. {{solarwinds_creds|length}} credential(s) found.\r\n                        {% else %}\r\n                            No SolarWinds credentials configured. Please add credentials.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        {% if solarwinds_configured %}\r\n                            <button class=\"action-button secondary\" onclick=\"showModal('solarwindsModal')\">View Details</button>\r\n                        {% else %}\r\n                            <button class=\"action-button\" style=\"background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);\" onclick=\"showModal('solarwindsModal')\">View Details</button>\r\n                        {% endif %}\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- LLM Configuration -->\r\n                <div class=\"health-card {% if llm_configured_count == 0 %}error{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> LLM Configuration</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{llm_configured_count}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if llm_configured_count > 0 %}\r\n                            {{llm_configured_count}} LLM model(s) configured and ready.\r\n                        {% else %}\r\n                            No LLM models configured. Add at least one model.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('llmModal')\">View Configured Models</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- LLM Reachability -->\r\n                <div class=\"health-card\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> LLM Reachability</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{llm_reachability_count}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if llm_reachability_count > 0 %}\r\n                            {{llm_reachability_count}} LLM model(s) are reachable and healthy.\r\n                        {% else %}\r\n                            No healthy LLM connections found.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('llmReachabilityModal')\">View Details</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Active Agents -->\r\n                <div class=\"health-card {% if total_agents == 0 %}warning{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> Active Agents</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{total_agents}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if total_agents > 0 %}\r\n                            {{total_agents}} agent(s) found.\r\n                        {% else %}\r\n                            No agents found.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('agentsModal')\">View Active Agents</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <!-- SolarWinds Modal -->\r\n    <div id=\"solarwindsModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2> SolarWinds Credentials</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('solarwindsModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if solarwinds_configured %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Configured Credentials</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for cred in solarwinds_creds -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-label\">Key</div>\r\n                                <div class=\"detail-value\">{{cred.key}}</div>\r\n                                <div class=\"detail-label\" style=\"margin-top: 0.5rem;\">Type</div>\r\n                                <div class=\"detail-value\">{{cred.type}}</div>\r\n                                <div class=\"detail-label\" style=\"margin-top: 0.5rem;\">Status</div>\r\n                                <div class=\"detail-value\" style=\"color: #28a745;\"> Configured</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No SolarWinds credentials configured</p>\r\n                        <p>Please add SolarWinds credentials to enable integration.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- LLM Modal -->\r\n    <div id=\"llmModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83e\udde0 LLM Configuration</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('llmModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if llm_configured_count > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Configured LLM Models</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for llm in llm_creds -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">{{llm.name}}</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No LLM models configured</p>\r\n                        <p>Please add at least one LLM model configuration to enable AI features.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Agents Modal -->\r\n    <div id=\"agentsModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83e\udd16 Agent Management</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('agentsModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if total_agents > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Agent Names</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for agent in ns.agent_list -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">{{agent.name or \"N/A\"}}</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No agents found</p>\r\n                        <p>No agents are configured for Solarwinds projects.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- LLM Reachability Modal -->\r\n    <div id=\"llmReachabilityModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83c\udf10 LLM Reachability</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('llmReachabilityModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if llm_reachability_count > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Healthy LLM Models (Last 30 Days)</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for llm_name in llm_names -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">{{llm_name}}</div>\r\n                            </li>\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No healthy LLM connections found</p>\r\n                        <p>No LLM models passed health checks in the last 30 days.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        // Modal Functions\r\n        function showModal(modalId) {\r\n            const modal = document.getElementById(modalId);\r\n            if (modal) {\r\n                modal.style.display = 'flex';\r\n                document.body.style.overflow = 'hidden';\r\n            }\r\n        }\r\n\r\n        function hideModal(modalId) {\r\n            const modal = document.getElementById(modalId);\r\n            if (modal) {\r\n                modal.style.display = 'none';\r\n                document.body.style.overflow = '';\r\n            }\r\n        }\r\n\r\n        // Close modal when clicking outside\r\n        window.addEventListener('click', function(event) {\r\n            if (event.target.classList.contains('modal')) {\r\n                hideModal(event.target.id);\r\n            }\r\n        });\r\n\r\n        // Close modal on Escape key\r\n        document.addEventListener('keydown', function(event) {\r\n            if (event.key === 'Escape') {\r\n                const modals = document.querySelectorAll('.modal');\r\n                modals.forEach(function(modal) {\r\n                    if (modal.style.display === 'flex') {\r\n                        hideModal(modal.id);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n"
        },
        {
            "name": "health.html",
            "value": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Agentic System Health Dashboard</title>\r\n    <style>\r\n        * {\r\n            margin: 0;\r\n            padding: 0;\r\n            box-sizing: border-box;\r\n        }\r\n\r\n        body {\r\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\r\n            background: #000000;\r\n            min-height: 100vh;\r\n            padding: 2rem;\r\n            color: #ffffff;\r\n        }\r\n\r\n        .dashboard-container {\r\n            max-width: 1200px;\r\n            margin: 0 auto;\r\n        }\r\n\r\n        .header {\r\n            text-align: center;\r\n            color: #ffffff;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .header h1 {\r\n            font-size: 2.5rem;\r\n            margin-bottom: 0.5rem;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            gap: 1rem;\r\n        }\r\n\r\n        .header-icon {\r\n            font-size: 3rem;\r\n            animation: float 3s ease-in-out infinite;\r\n        }\r\n\r\n        @keyframes float {\r\n            0%, 100% { transform: translateY(0px); }\r\n            50% { transform: translateY(-10px); }\r\n        }\r\n\r\n        .header p {\r\n            opacity: 0.95;\r\n            font-size: 1.1rem;\r\n        }\r\n\r\n        .health-widget {\r\n            background: #1f2937;\r\n            border: 1px solid #374151;\r\n            border-radius: 16px;\r\n            box-shadow: 0 20px 60px rgba(0,0,0,0.5);\r\n            padding: 2.5rem;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .widget-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 2rem;\r\n            padding-bottom: 1.5rem;\r\n            border-bottom: 3px solid #374151;\r\n            flex-wrap: wrap;\r\n            gap: 1rem;\r\n        }\r\n\r\n        .widget-title {\r\n            font-size: 1.8rem;\r\n            font-weight: 700;\r\n            color: #ffffff;\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.5rem;\r\n        }\r\n\r\n        .overall-status {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.75rem;\r\n            padding: 0.75rem 1.5rem;\r\n            background: #d4edda;\r\n            color: #155724;\r\n            border-radius: 25px;\r\n            font-weight: 600;\r\n            font-size: 1rem;\r\n            box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n            transition: all 0.3s ease;\r\n        }\r\n\r\n        .overall-status:hover {\r\n            transform: scale(1.05);\r\n        }\r\n\r\n        .overall-status.warning {\r\n            background: #fff3cd;\r\n            color: #856404;\r\n        }\r\n\r\n        .overall-status.error {\r\n            background: #f8d7da;\r\n            color: #721c24;\r\n        }\r\n\r\n        .status-indicator {\r\n            width: 12px;\r\n            height: 12px;\r\n            border-radius: 50%;\r\n            background: #28a745;\r\n            animation: pulse 2s infinite;\r\n            box-shadow: 0 0 10px rgba(40, 167, 69, 0.5);\r\n        }\r\n\r\n        .status-indicator.warning {\r\n            background: #ffc107;\r\n            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);\r\n        }\r\n\r\n        .status-indicator.error {\r\n            background: #dc3545;\r\n            box-shadow: 0 0 10px rgba(220, 53, 69, 0.5);\r\n        }\r\n\r\n        @keyframes pulse {\r\n            0%, 100% { \r\n                opacity: 1;\r\n                transform: scale(1);\r\n            }\r\n            50% { \r\n                opacity: 0.6;\r\n                transform: scale(1.2);\r\n            }\r\n        }\r\n\r\n        .health-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(2, 1fr);\r\n            gap: 1.5rem;\r\n            margin-bottom: 2rem;\r\n        }\r\n\r\n        .health-card {\r\n            background: #111827;\r\n            border-radius: 12px;\r\n            padding: 1.75rem;\r\n            border: 1px solid #374151;\r\n            border-left: 5px solid #28a745;\r\n            transition: all 0.3s ease;\r\n            position: relative;\r\n            overflow: hidden;\r\n        }\r\n\r\n        .health-card::before {\r\n            content: '';\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            width: 100px;\r\n            height: 100px;\r\n            background: radial-gradient(circle, rgba(102, 126, 234, 0.05) 0%, transparent 70%);\r\n            border-radius: 50%;\r\n            transform: translate(30%, -30%);\r\n        }\r\n\r\n        .health-card:hover {\r\n            transform: translateY(-5px);\r\n            box-shadow: 0 8px 24px rgba(0,0,0,0.15);\r\n        }\r\n\r\n        .health-card.warning {\r\n            border-left-color: #ffc107;\r\n        }\r\n\r\n        .health-card.error {\r\n            border-left-color: #dc3545;\r\n        }\r\n\r\n        .card-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: flex-start;\r\n            margin-bottom: 1.25rem;\r\n        }\r\n\r\n        .card-title {\r\n            font-size: 0.85rem;\r\n            color: #9ca3af;\r\n            font-weight: 600;\r\n            text-transform: uppercase;\r\n            letter-spacing: 1px;\r\n        }\r\n\r\n        .card-status {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 0.5rem;\r\n            font-size: 0.8rem;\r\n            font-weight: 700;\r\n            padding: 0.25rem 0.75rem;\r\n            border-radius: 12px;\r\n            background: rgba(40, 167, 69, 0.1);\r\n        }\r\n\r\n        .card-status.success {\r\n            color: #28a745;\r\n        }\r\n\r\n        .card-status.warning {\r\n            color: #ffc107;\r\n            background: rgba(255, 193, 7, 0.1);\r\n        }\r\n\r\n        .card-status.error {\r\n            color: #dc3545;\r\n            background: rgba(220, 53, 69, 0.1);\r\n        }\r\n\r\n        .card-icon {\r\n            width: 16px;\r\n            height: 16px;\r\n        }\r\n\r\n        .card-value {\r\n            font-size: 2.5rem;\r\n            font-weight: 800;\r\n            color: #ffffff;\r\n            margin-bottom: 0.75rem;\r\n            line-height: 1;\r\n        }\r\n\r\n        .card-description {\r\n            font-size: 0.9rem;\r\n            color: #9ca3af;\r\n            line-height: 1.5;\r\n            margin-bottom: 1rem;\r\n        }\r\n\r\n        .card-meta {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            font-size: 0.75rem;\r\n            color: #6b7280;\r\n            padding-top: 0.75rem;\r\n            border-top: 1px solid #374151;\r\n        }\r\n\r\n        .action-button {\r\n            padding: 0.6rem 1.25rem;\r\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n            color: white;\r\n            border: none;\r\n            border-radius: 8px;\r\n            font-size: 0.85rem;\r\n            font-weight: 600;\r\n            cursor: pointer;\r\n            transition: all 0.3s ease;\r\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\r\n        }\r\n\r\n        .action-button:hover {\r\n            transform: translateY(-2px);\r\n            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);\r\n        }\r\n\r\n        .action-button:active {\r\n            transform: translateY(0);\r\n        }\r\n\r\n        .action-button.secondary {\r\n            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\r\n            box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);\r\n        }\r\n\r\n        .action-button.secondary:hover {\r\n            box-shadow: 0 6px 16px rgba(108, 117, 125, 0.4);\r\n        }\r\n\r\n        .summary-stats {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\r\n            gap: 1.25rem;\r\n        }\r\n\r\n        .stat-card {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            border-radius: 12px;\r\n            padding: 1.5rem;\r\n            box-shadow: 0 4px 12px rgba(0,0,0,0.3);\r\n            transition: all 0.3s ease;\r\n            border-top: 4px solid #667eea;\r\n        }\r\n\r\n        .stat-card:hover {\r\n            transform: translateY(-3px);\r\n            box-shadow: 0 6px 16px rgba(0,0,0,0.15);\r\n        }\r\n\r\n        .stat-card:nth-child(2) {\r\n            border-top-color: #ffc107;\r\n        }\r\n\r\n        .stat-label {\r\n            font-size: 0.85rem;\r\n            color: #9ca3af;\r\n            margin-bottom: 0.75rem;\r\n            font-weight: 600;\r\n            text-transform: uppercase;\r\n            letter-spacing: 0.5px;\r\n        }\r\n\r\n        .stat-value {\r\n            font-size: 2rem;\r\n            font-weight: 800;\r\n            color: #ffffff;\r\n            display: flex;\r\n            align-items: baseline;\r\n            gap: 0.5rem;\r\n        }\r\n\r\n        .stat-unit {\r\n            font-size: 1rem;\r\n            color: #9ca3af;\r\n            font-weight: 500;\r\n        }\r\n\r\n\r\n        /* Modal Styles */\r\n        .modal {\r\n            display: none;\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            background-color: rgba(0, 0, 0, 0.8);\r\n            z-index: 1000;\r\n            justify-content: center;\r\n            align-items: center;\r\n            overflow-y: auto;\r\n            padding: 20px;\r\n        }\r\n\r\n        .modal-content {\r\n            background-color: #1f2937;\r\n            border: 1px solid #374151;\r\n            border-radius: 12px;\r\n            padding: 2rem;\r\n            max-width: 900px;\r\n            width: 100%;\r\n            max-height: 90vh;\r\n            overflow-y: auto;\r\n            position: relative;\r\n            box-shadow: 0 20px 60px rgba(0,0,0,0.8);\r\n        }\r\n\r\n        .modal-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 1.5rem;\r\n            padding-bottom: 1rem;\r\n            border-bottom: 2px solid #374151;\r\n        }\r\n\r\n        .modal-header h2 {\r\n            font-size: 1.8rem;\r\n            color: #ffffff;\r\n            margin: 0;\r\n        }\r\n\r\n        .close-button {\r\n            background: none;\r\n            border: none;\r\n            font-size: 2rem;\r\n            color: #9ca3af;\r\n            cursor: pointer;\r\n            padding: 0;\r\n            width: 40px;\r\n            height: 40px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            border-radius: 50%;\r\n            transition: all 0.2s;\r\n        }\r\n\r\n        .close-button:hover {\r\n            background-color: #374151;\r\n            color: #ffffff;\r\n        }\r\n\r\n        .modal-body {\r\n            color: #ffffff;\r\n        }\r\n\r\n        .detail-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n            gap: 1rem;\r\n            margin-bottom: 1.5rem;\r\n        }\r\n\r\n        .detail-item {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            padding: 1rem;\r\n            border-radius: 8px;\r\n            border-left: 3px solid #667eea;\r\n        }\r\n\r\n        .detail-label {\r\n            font-size: 0.75rem;\r\n            color: #9ca3af;\r\n            text-transform: uppercase;\r\n            letter-spacing: 0.5px;\r\n            margin-bottom: 0.5rem;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .detail-value {\r\n            font-size: 1.1rem;\r\n            color: #ffffff;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .detail-section {\r\n            margin-bottom: 1.5rem;\r\n        }\r\n\r\n        .detail-section h3 {\r\n            font-size: 1.2rem;\r\n            color: #ffffff;\r\n            margin-bottom: 1rem;\r\n            padding-bottom: 0.5rem;\r\n            border-bottom: 2px solid #374151;\r\n        }\r\n\r\n        .credentials-list {\r\n            list-style: none;\r\n            padding: 0;\r\n        }\r\n\r\n        .credentials-item {\r\n            background: #111827;\r\n            border: 1px solid #374151;\r\n            padding: 1rem;\r\n            margin-bottom: 0.75rem;\r\n            border-radius: 8px;\r\n            border-left: 3px solid #28a745;\r\n        }\r\n\r\n        .credentials-item.warning {\r\n            border-left-color: #ffc107;\r\n        }\r\n\r\n        .credentials-item.error {\r\n            border-left-color: #dc3545;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n            body {\r\n                padding: 1rem;\r\n            }\r\n\r\n            .header h1 {\r\n                font-size: 1.8rem;\r\n            }\r\n\r\n            .health-widget {\r\n                padding: 1.5rem;\r\n            }\r\n\r\n            .widget-header {\r\n                flex-direction: column;\r\n                align-items: flex-start;\r\n            }\r\n\r\n            .health-grid {\r\n                grid-template-columns: 1fr;\r\n            }\r\n\r\n            .modal-content {\r\n                padding: 1.5rem;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    {# Initialize all variables with safe defaults #}\r\n    {%- set solarwinds_creds = [] -%}\r\n    {%- set solarwinds_configured = False -%}\r\n    {%- set llm_creds = [] -%}\r\n    {%- set llm_configured_count = 0 -%}\r\n    {%- set all_agents = [] -%}\r\n    {%- set total_agents = 0 -%}\r\n    {%- set healthcheck_data = [] -%}\r\n    {%- set llm_names = [] -%}\r\n    {%- set llm_reachability_count = 0 -%}\r\n\r\n    {# Query credentials from rda_secrets_meta - use separate queries with simpler syntax to avoid CFXQL parsing issues #}\r\n    {%- if engine -%}\r\n        {# Query SolarWinds credentials #}\r\n        {%- set solarwinds_query = \"type is 'solarwinds'\" -%}\r\n        {%- set solarwinds_result = engine.query_stream_data(\"rda_secrets_meta\", cfxql_query=solarwinds_query, limit=100) -%}\r\n        {%- if solarwinds_result -%}\r\n            {%- set solarwinds_creds = solarwinds_result -%}\r\n            {%- set solarwinds_configured = solarwinds_creds|length > 0 -%}\r\n        {%- endif -%}\r\n\r\n        {# Query LLM credentials - get all LLM types, then filter excluded names in template #}\r\n        {%- set llm_query = \"type is 'llm'\" -%}\r\n        {%- set llm_result = engine.query_stream_data(\"rda_secrets_meta\", cfxql_query=llm_query, limit=100) -%}\r\n        {%- if llm_result -%}\r\n            {# Filter out excluded LLM names in template #}\r\n            {%- set excluded_llms = ['anthropic', 'claude-sonnet-4.5', 'claude-haiku-4.5', 'claude-haiku-3.5', 'GPT-4.1-mini', 'O3-mini'] -%}\r\n            {%- for llm_secret in llm_result -%}\r\n                {%- if llm_secret -%}\r\n                    {%- set secret_name = '' -%}\r\n                    {%- if llm_secret is mapping -%}\r\n                        {%- set secret_name = llm_secret.get('name', '') | default('') -%}\r\n                    {%- elif llm_secret.name is defined -%}\r\n                        {%- set secret_name = llm_secret.name | default('') -%}\r\n                    {%- endif -%}\r\n                    {%- if secret_name and secret_name not in excluded_llms -%}\r\n                        {%- set _ = llm_creds.append(llm_secret) -%}\r\n                    {%- endif -%}\r\n                {%- endif -%}\r\n            {%- endfor -%}\r\n            {%- set llm_configured_count = llm_creds|length -%}\r\n        {%- endif -%}\r\n\r\n        {# Query agents from rda_orchestrator_flow_meta #}\r\n        {%- set agents_query = \"ai_project_name in ['solarwinds'] GET name\" -%}\r\n        {%- set agents_result = engine.query_stream_data(\"rda_orchestrator_flow_meta\", cfxql_query=agents_query, limit=1000) -%}\r\n        {%- if agents_result -%}\r\n            {%- set all_agents = agents_result -%}\r\n        {%- endif -%}\r\n    {%- endif -%}\r\n    \r\n    {# Get all agents with name #}\r\n    {%- set ns = namespace(agent_list=[]) -%}\r\n    {%- if all_agents -%}\r\n        {%- for agent in all_agents -%}\r\n            {%- if agent -%}\r\n                {%- set agent_name = '' -%}\r\n                {%- if agent is mapping -%}\r\n                    {%- set agent_name = agent.get('name', '') | default('') -%}\r\n                {%- elif agent.name is defined -%}\r\n                    {%- set agent_name = agent.name | default('') -%}\r\n                {%- endif -%}\r\n                {%- if agent_name and agent_name != '' -%}\r\n                    {%- set _ = ns.agent_list.append(agent) -%}\r\n                {%- endif -%}\r\n            {%- endif -%}\r\n        {%- endfor -%}\r\n    {%- endif -%}\r\n    {%- set total_agents = ns.agent_list|length -%}\r\n\r\n    {# Query LLM reachability from healthcheck_stream #}\r\n    {%- if engine -%}\r\n        {%- set healthcheck_query = \"healthcheck is 'success' and status is 'success'\" -%}\r\n        {%- set healthcheck_result = engine.query_stream_aggs(stream=\"healthchecks_stream\", cfxql_query=healthcheck_query, aggs=[{\"field\":\"count_\",\"func\":\"sum\"}], groupby=[\"llm\"], duration_hours=720, ts_column=\"timestamp\") -%}\r\n        {%- if healthcheck_result -%}\r\n            {%- set healthcheck_data = healthcheck_result -%}\r\n            {%- for llm_item in healthcheck_data -%}\r\n                {%- if llm_item -%}\r\n                    {%- set llm_value = '' -%}\r\n                    {%- if llm_item is mapping -%}\r\n                        {%- set llm_value = llm_item.get('llm', '') | default('') -%}\r\n                    {%- elif llm_item.llm is defined -%}\r\n                        {%- set llm_value = llm_item.llm | default('') -%}\r\n                    {%- endif -%}\r\n                    {%- if llm_value and llm_value != '' -%}\r\n                        {%- set _ = llm_names.append(llm_value|string) -%}\r\n                    {%- endif -%}\r\n                {%- endif -%}\r\n            {%- endfor -%}\r\n        {%- endif -%}\r\n    {%- endif -%}\r\n    {%- set llm_reachability_count = llm_names|length -%}\r\n\r\n    {# Calculate overall system status #}\r\n    {%- set overall_status = \"success\" -%}\r\n    {%- set overall_message = \"All Systems Operational\" -%}\r\n    {%- if not solarwinds_configured -%}\r\n        {%- set overall_status = \"error\" -%}\r\n        {%- set overall_message = \"SolarWinds Credentials Not Configured\" -%}\r\n    {%- elif llm_configured_count == 0 -%}\r\n        {%- set overall_status = \"error\" -%}\r\n        {%- set overall_message = \"No LLM Configured\" -%}\r\n    {%- elif total_agents == 0 -%}\r\n        {%- set overall_status = \"warning\" -%}\r\n        {%- set overall_message = \"No Agents Found\" -%}\r\n    {%- endif -%}\r\n\r\n    <div class=\"dashboard-container\">\r\n        <div class=\"header\">\r\n            <h1>\r\n                <span class=\"header-icon\">\ud83e\udd16</span>\r\n                Agentic System Health\r\n            </h1>\r\n            <p>Real-time monitoring and status of your intelligent agent infrastructure</p>\r\n        </div>\r\n\r\n        <div class=\"health-widget\">\r\n            <div class=\"widget-header\">\r\n                <h2 class=\"widget-title\">\r\n                    <span>\u26a1</span>\r\n                    System Overview\r\n                </h2>\r\n                <div class=\"overall-status {{overall_status}}\">\r\n                    <span class=\"status-indicator {{overall_status}}\"></span>\r\n                    <span>{{overall_message}}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"health-grid\">\r\n                <!-- SolarWinds Credentials -->\r\n                <div class=\"health-card {% if not solarwinds_configured %}error{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> SolarWinds Credentials</span>\r\n                    </div>\r\n                    <div class=\"card-value\">\r\n                        {% if solarwinds_configured %}\r\n                            <span style=\"font-size: 1.5rem; color: #28a745;\">Configured</span>\r\n                        {% else %}\r\n                            <span style=\"font-size: 1.5rem; color: #dc3545;\">Not Configured</span>\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-description\">\r\n                        {% if solarwinds_configured %}\r\n                            Credentials are properly configured. {{solarwinds_creds|length}} credential(s) found.\r\n                        {% else %}\r\n                            No SolarWinds credentials configured. Please add credentials.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        {% if solarwinds_configured %}\r\n                            <button class=\"action-button secondary\" onclick=\"showModal('solarwindsModal')\">View Details</button>\r\n                        {% else %}\r\n                            <button class=\"action-button\" style=\"background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);\" onclick=\"showModal('solarwindsModal')\">View Details</button>\r\n                        {% endif %}\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- LLM Configuration -->\r\n                <div class=\"health-card {% if llm_configured_count == 0 %}error{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> LLM Configuration</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{llm_configured_count}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if llm_configured_count > 0 %}\r\n                            {{llm_configured_count}} LLM model(s) configured and ready.\r\n                        {% else %}\r\n                            No LLM models configured. Add at least one model.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('llmModal')\">View Configured Models</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- LLM Reachability -->\r\n                <div class=\"health-card\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> LLM Reachability</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{llm_reachability_count}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if llm_reachability_count > 0 %}\r\n                            {{llm_reachability_count}} LLM model(s) are reachable and healthy.\r\n                        {% else %}\r\n                            No healthy LLM connections found.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('llmReachabilityModal')\">View Details</button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Active Agents -->\r\n                <div class=\"health-card {% if total_agents == 0 %}warning{% endif %}\">\r\n                    <div class=\"card-header\">\r\n                        <span class=\"card-title\"> Active Agents</span>\r\n                    </div>\r\n                    <div class=\"card-value\">{{total_agents}}</div>\r\n                    <div class=\"card-description\">\r\n                        {% if total_agents > 0 %}\r\n                            {{total_agents}} agent(s) found.\r\n                        {% else %}\r\n                            No agents found.\r\n                        {% endif %}\r\n                    </div>\r\n                    <div class=\"card-meta\">\r\n                        <button class=\"action-button secondary\" onclick=\"showModal('agentsModal')\">View Active Agents</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <!-- SolarWinds Modal -->\r\n    <div id=\"solarwindsModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2> SolarWinds Credentials</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('solarwindsModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if solarwinds_configured %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Configured Credentials</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for cred in solarwinds_creds -%}\r\n                            {%- if cred -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-label\">Key</div>\r\n                                <div class=\"detail-value\">\r\n                                    {%- if cred is mapping -%}\r\n                                        {{cred.get('key', 'N/A')}}\r\n                                    {%- else -%}\r\n                                        {{cred.key if cred.key is defined else 'N/A'}}\r\n                                    {%- endif -%}\r\n                                </div>\r\n                                <div class=\"detail-label\" style=\"margin-top: 0.5rem;\">Type</div>\r\n                                <div class=\"detail-value\">\r\n                                    {%- if cred is mapping -%}\r\n                                        {{cred.get('type', 'N/A')}}\r\n                                    {%- else -%}\r\n                                        {{cred.type if cred.type is defined else 'N/A'}}\r\n                                    {%- endif -%}\r\n                                </div>\r\n                                <div class=\"detail-label\" style=\"margin-top: 0.5rem;\">Status</div>\r\n                                <div class=\"detail-value\" style=\"color: #28a745;\"> Configured</div>\r\n                            </li>\r\n                            {%- endif -%}\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No SolarWinds credentials configured</p>\r\n                        <p>Please add SolarWinds credentials to enable integration.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- LLM Modal -->\r\n    <div id=\"llmModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83e\udde0 LLM Configuration</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('llmModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if llm_configured_count > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Configured LLM Models</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for llm in llm_creds -%}\r\n                            {%- if llm -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">\r\n                                    {%- if llm is mapping -%}\r\n                                        {{llm.get('name', 'N/A')}}\r\n                                    {%- else -%}\r\n                                        {{llm.name if llm.name is defined else 'N/A'}}\r\n                                    {%- endif -%}\r\n                                </div>\r\n                            </li>\r\n                            {%- endif -%}\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No LLM models configured</p>\r\n                        <p>Please add at least one LLM model configuration to enable AI features.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Agents Modal -->\r\n    <div id=\"agentsModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83e\udd16 Agent Management</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('agentsModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if total_agents > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Agent Names</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for agent in ns.agent_list -%}\r\n                            {%- if agent -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">\r\n                                    {%- if agent is mapping -%}\r\n                                        {{agent.get('name', 'N/A')}}\r\n                                    {%- else -%}\r\n                                        {{agent.name if agent.name is defined else 'N/A'}}\r\n                                    {%- endif -%}\r\n                                </div>\r\n                            </li>\r\n                            {%- endif -%}\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No agents found</p>\r\n                        <p>No agents are configured for Solarwinds projects.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- LLM Reachability Modal -->\r\n    <div id=\"llmReachabilityModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2>\ud83c\udf10 LLM Reachability</h2>\r\n                <button class=\"close-button\" onclick=\"hideModal('llmReachabilityModal')\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {% if llm_reachability_count > 0 %}\r\n                    <div class=\"detail-section\">\r\n                        <h3>Healthy LLM Models (Last 30 Days)</h3>\r\n                        <ul class=\"credentials-list\">\r\n                            {%- for llm_name in llm_names -%}\r\n                            {%- if llm_name -%}\r\n                            <li class=\"credentials-item\">\r\n                                <div class=\"detail-value\">{{llm_name|string}}</div>\r\n                            </li>\r\n                            {%- endif -%}\r\n                            {%- endfor -%}\r\n                        </ul>\r\n                    </div>\r\n                {% else %}\r\n                    <div class=\"detail-section\">\r\n                        <p style=\"color: #dc3545; font-weight: 600;\"> No healthy LLM connections found</p>\r\n                        <p>No LLM models passed health checks in the last 30 days.</p>\r\n                    </div>\r\n                {% endif %}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        // Modal Functions\r\n        function showModal(modalId) {\r\n            const modal = document.getElementById(modalId);\r\n            if (modal) {\r\n                modal.style.display = 'flex';\r\n                document.body.style.overflow = 'hidden';\r\n            }\r\n        }\r\n\r\n        function hideModal(modalId) {\r\n            const modal = document.getElementById(modalId);\r\n            if (modal) {\r\n                modal.style.display = 'none';\r\n                document.body.style.overflow = '';\r\n            }\r\n        }\r\n\r\n        // Close modal when clicking outside\r\n        window.addEventListener('click', function(event) {\r\n            if (event.target.classList.contains('modal')) {\r\n                hideModal(event.target.id);\r\n            }\r\n        });\r\n\r\n        // Close modal on Escape key\r\n        document.addEventListener('keydown', function(event) {\r\n            if (event.key === 'Escape') {\r\n                const modals = document.querySelectorAll('.modal');\r\n                modals.forEach(function(modal) {\r\n                    if (modal.style.display === 'flex') {\r\n                        hideModal(modal.id);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n"
        }
    ]
}