{
    "name": "ai_spend_rules",
    "label": "AI Spend Limits",
    "description": "AI Spend Limits",
    "dashboard_folder": "AI",
    "version": "1.0.5",
    "enabled": false,
    "dashboard_type": "template",
    "live_edit": true,
    "dashboard_filters": {
        "time_filter": true,
        "default_time_filter_labels": [
            "All Time"
        ],
        "columns_filter": [
            {
                "id": "timestamp",
                "label": "Timestamp",
                "type": "DATETIME"
            },
            {
                "id": "USER_ID",
                "label": "User Id",
                "type": "TEXT"
            },
            {
                "id": "context_USER_ID",
                "label": "Context User Id",
                "type": "TEXT"
            },
            {
                "id": "context_USER_ROLE",
                "label": "Context User Role",
                "type": "TEXT"
            },
            {
                "id": "context_approver_userid",
                "label": "Context Approver Userid",
                "type": "TEXT"
            },
            {
                "id": "context_incidentid",
                "label": "Context Incidentid",
                "type": "TEXT"
            },
            {
                "id": "conversationId",
                "label": "Conversationid",
                "type": "TEXT"
            },
            {
                "id": "conversationLabel",
                "label": "Conversationlabel",
                "type": "TEXT"
            },
            {
                "id": "isToolCall",
                "label": "Istoolcall",
                "type": "TEXT"
            },
            {
                "id": "llm",
                "label": "Llm",
                "type": "TEXT"
            },
            {
                "id": "llm_name",
                "label": "Llm Name",
                "type": "TEXT"
            },
            {
                "id": "message",
                "label": "Message",
                "type": "TEXT"
            },
            {
                "id": "persona",
                "label": "Persona",
                "type": "TEXT"
            },
            {
                "id": "prompt_id",
                "label": "Prompt Id",
                "type": "TEXT"
            },
            {
                "id": "request_status",
                "label": "Request Status",
                "type": "TEXT"
            },
            {
                "id": "request_subtype",
                "label": "Request Subtype",
                "type": "TEXT"
            },
            {
                "id": "request_type",
                "label": "Request Type",
                "type": "TEXT"
            },
            {
                "id": "severity",
                "label": "Severity",
                "type": "TEXT"
            },
            {
                "id": "tool_content",
                "label": "Tool Content",
                "type": "TEXT"
            },
            {
                "id": "tool_domain",
                "label": "Tool Domain",
                "type": "TEXT"
            },
            {
                "id": "tool_name",
                "label": "Tool Name",
                "type": "TEXT"
            },
            {
                "id": "tool_status",
                "label": "Tool Status",
                "type": "TEXT"
            },
            {
                "id": "type",
                "label": "Type",
                "type": "TEXT"
            },
            {
                "id": "token_usage_cache_tokens",
                "label": "Token Usage Cache Tokens",
                "type": "DOUBLE"
            },
            {
                "id": "token_usage_input_tokens",
                "label": "Token Usage Input Tokens",
                "type": "DOUBLE"
            },
            {
                "id": "token_usage_output_tokens",
                "label": "Token Usage Output Tokens",
                "type": "DOUBLE"
            },
            {
                "id": "token_usage_reasoning_tokens",
                "label": "Token Usage Reasoning Tokens",
                "type": "DOUBLE"
            },
            {
                "id": "token_usage_total_tokens",
                "label": "Token Usage Total Tokens",
                "type": "DOUBLE"
            }
        ],
        "group_filters": [
            {
                "stream": "rda_chat_sessions",
                "title": "LLM",
                "duration_hours": 1080,
                "limit": 200,
                "extra_filter": "type == 'client'",
                "group_by": [
                    "llm"
                ],
                "ts_column": "timestamp",
                "agg": "sum",
                "column": "count_",
                "type": "int"
            },
            {
                "stream": "rda_chat_sessions",
                "title": "Request Type",
                "duration_hours": 1080,
                "limit": 200,
                "extra_filter": "type == 'client'",
                "group_by": [
                    "request_type"
                ],
                "ts_column": "timestamp",
                "agg": "sum",
                "column": "count_",
                "type": "int"
            },
            {
                "stream": "rda_chat_sessions",
                "title": "User",
                "duration_hours": 1080,
                "limit": 200,
                "extra_filter": "type == 'client'",
                "group_by": [
                    "USER_ID"
                ],
                "ts_column": "timestamp",
                "agg": "sum",
                "column": "count_",
                "type": "int"
            },
            {
                "stream": "rda_chat_sessions",
                "title": "Persona",
                "duration_hours": 1080,
                "limit": 200,
                "extra_filter": "type == 'client'",
                "group_by": [
                    "persona"
                ],
                "ts_column": "timestamp",
                "agg": "sum",
                "column": "count_",
                "type": "int"
            }
        ]
    },
    "dashboard_sections": [
        {
            "title": "AI Spend Limits",
            "show_filter": true,
            "widgets": [
                {
                    "title": "AI Spend Limits",
                    "widget_group1": "G0",
                    "widget_type": "portal_tabular",
                    "reportId": "rda.saas.spendlimitrule.list.tabular",
                    "height": 10,
                    "min_wdith": 12,
                    "paginated": true,
                    "widget_id": "3544c904",
                    "actions": [
                        {
                            "permission": "agenticai:llm_cost:add",
                            "title": "Add dynamic",
                            "type": "POPUP_FORM",
                            "selectionType": "SINGLE",
                            "identifier": "saas-service-action:add-spend-limit-rule",
                            "api-endpoint": {
                                "service-name": "saas-reports",
                                "methodName": "getForm",
                                "stringified-params": true,
                                "parse-output": false,
                                "params": [
                                    {
                                        "formId": "rda.saas.dynamic.form",
                                        "formDefinition": {
                                            "formFieldList": [
                                                {
                                                    "fieldId": "id",
                                                    "label": "Limit Rule ID",
                                                    "description": "Unique identifier for the spend limit rule (alphanumeric characters, spaces, underscores, and hyphens only)",
                                                    "required": true,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "TEXT_FIELD",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "pattern",
                                                            "value": "^[a-zA-Z0-9 _-]+$"
                                                        },
                                                        {
                                                            "attribute": "patternMessage",
                                                            "value": "Only alphanumeric characters, spaces, underscores, and hyphens are allowed"
                                                        },
                                                        {
                                                            "attribute": "maxLength",
                                                            "value": 100
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_type",
                                                    "label": "Subject Type",
                                                    "description": "Select the entity type to apply the spend limit",
                                                    "required": true,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "COMBO_BOX",
                                                    "lovValues": [
                                                        {
                                                            "identifier": "User",
                                                            "displayName": "User"
                                                        },
                                                        {
                                                            "identifier": "User Group",
                                                            "displayName": "User Group"
                                                        },
                                                        {
                                                            "identifier": "Project",
                                                            "displayName": "Project"
                                                        },
                                                        {
                                                            "identifier": "Persona",
                                                            "displayName": "Persona"
                                                        },
                                                        {
                                                            "identifier": "AI Model",
                                                            "displayName": "AI Model"
                                                        }
                                                    ],
                                                    "fieldControlPropertyList": [
                                                        {
                                                            "fieldId": "subject_id_user",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "User"
                                                            }
                                                        },
                                                        {
                                                            "fieldId": "subject_id_user_group",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "User Group"
                                                            }
                                                        },
                                                        {
                                                            "fieldId": "subject_id_project",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "Project"
                                                            }
                                                        },
                                                        {
                                                            "fieldId": "subject_id_persona",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "Persona"
                                                            }
                                                        },
                                                        {
                                                            "fieldId": "subject_id_ai_model",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "AI Model"
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_id_user",
                                                    "label": "User",
                                                    "description": "Select user(s) to apply the spend limit to",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": true,
                                                    "editable": true,
                                                    "controlType": "SELECTOR_DIALOG",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "api-endpoint",
                                                            "value": {
                                                                "service-name": "saas-reports",
                                                                "methodName": "getReport",
                                                                "parse-output": true,
                                                                "params": [
                                                                    {
                                                                        "reportId": "rda.saas.aiproject.manage.members.list.tabular"
                                                                    }
                                                                ],
                                                                "stringified-params": false
                                                            }
                                                        },
                                                        {
                                                            "attribute": "column-key",
                                                            "value": "userId"
                                                        },
                                                        {
                                                            "attribute": "selection",
                                                            "value": "MULTIPLE"
                                                        },
                                                        {
                                                            "attribute": "disable-all-actions",
                                                            "value": true
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_id_user_group",
                                                    "label": "User Group",
                                                    "description": "Select user group(s) to apply the spend limit to",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": true,
                                                    "editable": true,
                                                    "controlType": "SELECTOR_DIALOG",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "api-endpoint",
                                                            "value": {
                                                                "service-name": "saas-reports",
                                                                "methodName": "getReport",
                                                                "parse-output": true,
                                                                "params": [
                                                                    {
                                                                        "reportId": "rda.saas.user.group.form.tabular"
                                                                    }
                                                                ],
                                                                "stringified-params": false
                                                            }
                                                        },
                                                        {
                                                            "attribute": "column-key",
                                                            "value": "name"
                                                        },
                                                        {
                                                            "attribute": "selection",
                                                            "value": "MULTIPLE"
                                                        },
                                                        {
                                                            "attribute": "disable-all-actions",
                                                            "value": true
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_id_project",
                                                    "label": "Project",
                                                    "description": "Select project(s) to apply the spend limit to",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": true,
                                                    "editable": true,
                                                    "controlType": "SELECTOR_DIALOG",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "api-endpoint",
                                                            "value": {
                                                                "service-name": "saas-reports",
                                                                "methodName": "getReport",
                                                                "parse-output": true,
                                                                "params": [
                                                                    {
                                                                        "reportId": "aiprojects.list.tabular"
                                                                    }
                                                                ],
                                                                "stringified-params": false
                                                            }
                                                        },
                                                        {
                                                            "attribute": "column-key",
                                                            "value": "ai_project_name"
                                                        },
                                                        {
                                                            "attribute": "selection",
                                                            "value": "MULTIPLE"
                                                        },
                                                        {
                                                            "attribute": "disable-all-actions",
                                                            "value": true
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_id_persona",
                                                    "label": "Persona",
                                                    "description": "Select persona(s) to apply the spend limit to",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": true,
                                                    "editable": true,
                                                    "controlType": "SELECTOR_DIALOG",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "api-endpoint",
                                                            "value": {
                                                                "service-name": "saas-reports",
                                                                "methodName": "getReport",
                                                                "parse-output": true,
                                                                "params": [
                                                                    {
                                                                        "reportId": "aipersonas.list.tabular"
                                                                    }
                                                                ],
                                                                "stringified-params": false
                                                            }
                                                        },
                                                        {
                                                            "attribute": "column-key",
                                                            "value": "name"
                                                        },
                                                        {
                                                            "attribute": "selection",
                                                            "value": "MULTIPLE"
                                                        },
                                                        {
                                                            "attribute": "disable-all-actions",
                                                            "value": true
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_id_ai_model",
                                                    "label": "AI Model",
                                                    "description": "Select AI model(s) to apply the spend limit to",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": true,
                                                    "editable": true,
                                                    "controlType": "SELECTOR_DIALOG",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "api-endpoint",
                                                            "value": {
                                                                "service-name": "saas-reports",
                                                                "methodName": "getReport",
                                                                "parse-output": true,
                                                                "params": [
                                                                    {
                                                                        "reportId": "rda.saas.aipersona.llms.list.tabular"
                                                                    }
                                                                ],
                                                                "stringified-params": false
                                                            }
                                                        },
                                                        {
                                                            "attribute": "column-key",
                                                            "value": "name"
                                                        },
                                                        {
                                                            "attribute": "selection",
                                                            "value": "MULTIPLE"
                                                        },
                                                        {
                                                            "attribute": "disable-all-actions",
                                                            "value": true
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "duration",
                                                    "label": "Duration",
                                                    "description": "Select the time period for the spend limit",
                                                    "required": true,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "COMBO_BOX",
                                                    "lovValues": [
                                                        {
                                                            "identifier": "Day",
                                                            "displayName": "Day"
                                                        },
                                                        {
                                                            "identifier": "Week",
                                                            "displayName": "Week"
                                                        },
                                                        {
                                                            "identifier": "Month",
                                                            "displayName": "Month"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "spend_limit",
                                                    "label": "Spend Limit Amount ($)",
                                                    "description": "Maximum spend amount in USD for the selected duration",
                                                    "required": true,
                                                    "isSecret": false,
                                                    "dataType": "number",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "TEXT_FIELD",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "type",
                                                            "value": "number"
                                                        },
                                                        {
                                                            "attribute": "min",
                                                            "value": 0
                                                        },
                                                        {
                                                            "attribute": "step",
                                                            "value": 0.01
                                                        },
                                                        {
                                                            "attribute": "pattern",
                                                            "value": "^[0-9]+(\\.[0-9]{1,2})?$"
                                                        },
                                                        {
                                                            "attribute": "patternMessage",
                                                            "value": "Please enter a valid amount (e.g., 100.50)"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "action_when_limit_reached",
                                                    "label": "Action When Spend Limit is Reached",
                                                    "description": "Select the action to take when the spend limit is reached",
                                                    "required": true,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "COMBO_BOX",
                                                    "lovValues": [
                                                        {
                                                            "identifier": "Notify",
                                                            "displayName": "Notify"
                                                        },
                                                        {
                                                            "identifier": "Block",
                                                            "displayName": "Block"
                                                        }
                                                    ],
                                                    "fieldControlPropertyList": [
                                                        {
                                                            "fieldId": "block_clearance",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "Block"
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "block_clearance",
                                                    "label": "Block Clearance",
                                                    "description": "Select how blocked requests should be cleared (only applicable if action is Block)",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "COMBO_BOX",
                                                    "lovValues": [
                                                        {
                                                            "identifier": "Automatic",
                                                            "displayName": "Automatic"
                                                        },
                                                        {
                                                            "identifier": "Manual",
                                                            "displayName": "Manual"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "formActionList": {
                                            "formActions": [
                                                {
                                                    "actionLabel": "Add",
                                                    "identifier": "Submit"
                                                }
                                            ]
                                        },
                                        "actions": [
                                            {
                                                "type": "API_ENDPOINT",
                                                "service-name": "chat-helper",
                                                "namespace": "io.cfx.dimensions.app",
                                                "methodName": "add-spend-limit-rule",
                                                "stringified-params": true,
                                                "parse-output": false,
                                                "useReportContext": true,
                                                "params": [
                                                    {
                                                        "form_id": "chatHelper.add.spend.limit.rule",
                                                        "context": {}
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        },
                        {
                            "permission": "agenticai:llm_cost:add",
                            "title": "Add default dynamic",
                            "type": "POPUP_FORM",
                            "selectionType": "SINGLE",
                            "identifier": "saas-service-action:add-spend-limit-rule",
                            "api-endpoint": {
                                "service-name": "saas-reports",
                                "methodName": "getForm",
                                "stringified-params": true,
                                "parse-output": false,
                                "params": [
                                    {
                                        "formId": "rda.saas.dynamic.form",
                                        "formDefinition": {
                                            "formFieldList": [
                                                {
                                                    "fieldId": "id",
                                                    "label": "Limit Rule ID",
                                                    "description": "Unique identifier for the spend limit rule (alphanumeric characters, spaces, underscores, and hyphens only)",
                                                    "required": true,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "TEXT_FIELD",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "pattern",
                                                            "value": "^[a-zA-Z0-9 _-]+$"
                                                        },
                                                        {
                                                            "attribute": "patternMessage",
                                                            "value": "Only alphanumeric characters, spaces, underscores, and hyphens are allowed"
                                                        },
                                                        {
                                                            "attribute": "maxLength",
                                                            "value": 100
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_type",
                                                    "label": "Subject Type",
                                                    "description": "Select the entity type to apply the spend limit",
                                                    "required": true,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "COMBO_BOX",
                                                    "lovValues": [
                                                        {
                                                            "identifier": "User",
                                                            "displayName": "User"
                                                        },
                                                        {
                                                            "identifier": "User Group",
                                                            "displayName": "User Group"
                                                        },
                                                        {
                                                            "identifier": "Project",
                                                            "displayName": "Project"
                                                        },
                                                        {
                                                            "identifier": "Persona",
                                                            "displayName": "Persona"
                                                        },
                                                        {
                                                            "identifier": "AI Model",
                                                            "displayName": "AI Model"
                                                        }
                                                    ],
                                                    "fieldControlPropertyList": [
                                                        {
                                                            "fieldId": "subject_id_user",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "User"
                                                            }
                                                        },
                                                        {
                                                            "fieldId": "subject_id_user_group",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "User Group"
                                                            }
                                                        },
                                                        {
                                                            "fieldId": "subject_id_project",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "Project"
                                                            }
                                                        },
                                                        {
                                                            "fieldId": "subject_id_persona",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "Persona"
                                                            }
                                                        },
                                                        {
                                                            "fieldId": "subject_id_ai_model",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "AI Model"
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_id_user",
                                                    "label": "User",
                                                    "description": "Select user(s) to apply the spend limit to",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": true,
                                                    "editable": true,
                                                    "controlType": "SELECTOR_DIALOG",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "api-endpoint",
                                                            "value": {
                                                                "service-name": "saas-reports",
                                                                "methodName": "getReport",
                                                                "parse-output": true,
                                                                "params": [
                                                                    {
                                                                        "reportId": "rda.saas.aiproject.manage.members.list.tabular"
                                                                    }
                                                                ],
                                                                "stringified-params": false
                                                            }
                                                        },
                                                        {
                                                            "attribute": "column-key",
                                                            "value": "userId"
                                                        },
                                                        {
                                                            "attribute": "selection",
                                                            "value": "MULTIPLE"
                                                        },
                                                        {
                                                            "attribute": "disable-all-actions",
                                                            "value": true
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_id_user_group",
                                                    "label": "User Group",
                                                    "description": "Select user group(s) to apply the spend limit to",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": true,
                                                    "editable": true,
                                                    "controlType": "SELECTOR_DIALOG",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "api-endpoint",
                                                            "value": {
                                                                "service-name": "saas-reports",
                                                                "methodName": "getReport",
                                                                "parse-output": true,
                                                                "params": [
                                                                    {
                                                                        "reportId": "rda.saas.user.group.form.tabular"
                                                                    }
                                                                ],
                                                                "stringified-params": false
                                                            }
                                                        },
                                                        {
                                                            "attribute": "column-key",
                                                            "value": "name"
                                                        },
                                                        {
                                                            "attribute": "selection",
                                                            "value": "MULTIPLE"
                                                        },
                                                        {
                                                            "attribute": "disable-all-actions",
                                                            "value": true
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_id_project",
                                                    "label": "Project",
                                                    "description": "Select project(s) to apply the spend limit to",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": true,
                                                    "editable": true,
                                                    "controlType": "SELECTOR_DIALOG",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "api-endpoint",
                                                            "value": {
                                                                "service-name": "saas-reports",
                                                                "methodName": "getReport",
                                                                "parse-output": true,
                                                                "params": [
                                                                    {
                                                                        "reportId": "aiprojects.list.tabular"
                                                                    }
                                                                ],
                                                                "stringified-params": false
                                                            }
                                                        },
                                                        {
                                                            "attribute": "column-key",
                                                            "value": "ai_project_name"
                                                        },
                                                        {
                                                            "attribute": "selection",
                                                            "value": "MULTIPLE"
                                                        },
                                                        {
                                                            "attribute": "disable-all-actions",
                                                            "value": true
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_id_persona",
                                                    "label": "Persona",
                                                    "description": "Select persona(s) to apply the spend limit to",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": true,
                                                    "editable": true,
                                                    "controlType": "SELECTOR_DIALOG",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "api-endpoint",
                                                            "value": {
                                                                "service-name": "saas-reports",
                                                                "methodName": "getReport",
                                                                "parse-output": true,
                                                                "params": [
                                                                    {
                                                                        "reportId": "aipersonas.list.tabular"
                                                                    }
                                                                ],
                                                                "stringified-params": false
                                                            }
                                                        },
                                                        {
                                                            "attribute": "column-key",
                                                            "value": "name"
                                                        },
                                                        {
                                                            "attribute": "selection",
                                                            "value": "MULTIPLE"
                                                        },
                                                        {
                                                            "attribute": "disable-all-actions",
                                                            "value": true
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "subject_id_ai_model",
                                                    "label": "AI Model",
                                                    "description": "Select AI model(s) to apply the spend limit to",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": true,
                                                    "editable": true,
                                                    "controlType": "SELECTOR_DIALOG",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "api-endpoint",
                                                            "value": {
                                                                "service-name": "saas-reports",
                                                                "methodName": "getReport",
                                                                "parse-output": true,
                                                                "params": [
                                                                    {
                                                                        "reportId": "rda.saas.aipersona.llms.list.tabular"
                                                                    }
                                                                ],
                                                                "stringified-params": false
                                                            }
                                                        },
                                                        {
                                                            "attribute": "column-key",
                                                            "value": "name"
                                                        },
                                                        {
                                                            "attribute": "selection",
                                                            "value": "MULTIPLE"
                                                        },
                                                        {
                                                            "attribute": "disable-all-actions",
                                                            "value": true
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "duration",
                                                    "label": "Duration",
                                                    "description": "Select the time period for the spend limit",
                                                    "required": true,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "COMBO_BOX",
                                                    "lovValues": [
                                                        {
                                                            "identifier": "Day",
                                                            "displayName": "Day"
                                                        },
                                                        {
                                                            "identifier": "Week",
                                                            "displayName": "Week"
                                                        },
                                                        {
                                                            "identifier": "Month",
                                                            "displayName": "Month"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "spend_limit",
                                                    "label": "Spend Limit Amount ($)",
                                                    "description": "Maximum spend amount in USD for the selected duration",
                                                    "required": true,
                                                    "isSecret": false,
                                                    "dataType": "number",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "TEXT_FIELD",
                                                    "controlPropertyList": [
                                                        {
                                                            "attribute": "type",
                                                            "value": "number"
                                                        },
                                                        {
                                                            "attribute": "min",
                                                            "value": 0
                                                        },
                                                        {
                                                            "attribute": "step",
                                                            "value": 0.01
                                                        },
                                                        {
                                                            "attribute": "pattern",
                                                            "value": "^[0-9]+(\\.[0-9]{1,2})?$"
                                                        },
                                                        {
                                                            "attribute": "patternMessage",
                                                            "value": "Please enter a valid amount (e.g., 100.50)"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "action_when_limit_reached",
                                                    "label": "Action When Spend Limit is Reached",
                                                    "description": "Select the action to take when the spend limit is reached",
                                                    "required": true,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "COMBO_BOX",
                                                    "lovValues": [
                                                        {
                                                            "identifier": "Notify",
                                                            "displayName": "Notify"
                                                        },
                                                        {
                                                            "identifier": "Block",
                                                            "displayName": "Block"
                                                        }
                                                    ],
                                                    "fieldControlPropertyList": [
                                                        {
                                                            "fieldId": "block_clearance",
                                                            "controlActions": [
                                                                "ShowField"
                                                            ],
                                                            "condition": {
                                                                "selectionValue": "Block"
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "fieldId": "block_clearance",
                                                    "label": "Block Clearance",
                                                    "description": "Select how blocked requests should be cleared (only applicable if action is Block)",
                                                    "required": false,
                                                    "isSecret": false,
                                                    "dataType": "string",
                                                    "hidden": false,
                                                    "editable": true,
                                                    "controlType": "COMBO_BOX",
                                                    "lovValues": [
                                                        {
                                                            "identifier": "Automatic",
                                                            "displayName": "Automatic"
                                                        },
                                                        {
                                                            "identifier": "Manual",
                                                            "displayName": "Manual"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "formActionList": {
                                            "formActions": [
                                                {
                                                    "actionLabel": "Add",
                                                    "identifier": "Submit"
                                                }
                                            ]
                                        },
                                        "actions": [
                                            {
                                                "type": "API_ENDPOINT",
                                                "service-name": "chat-helper",
                                                "namespace": "io.cfx.dimensions.app",
                                                "methodName": "add-default-spend-limit-rule",
                                                "stringified-params": true,
                                                "parse-output": false,
                                                "useReportContext": true,
                                                "params": [
                                                    {
                                                        "form_id": "chatHelper.add.spend.limit.rule",
                                                        "context": {}
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "saved_time": "2025-12-01T11:11:59.113087"
}