%% stream = no and limit = 0
@dm:empty
    --> @dm:addrow name="rda_shared_conversations" and columns is 'ai_project_name' and values is 'CapG_ai'
    --> #dm:pstream-update-data-by-query ai_project_name is empty or ai_project_name is ''
--> @c:new-block
    --> @dm:empty
    --> @dm:addrow name="rda_chat_sessions" and columns is 'ai_project_name' and values is 'CapG_ai'
    --> #dm:pstream-update-data-by-query ai_project_name is empty or ai_project_name is ''
--> @c:new-block
    --> @dm:empty
    --> @dm:addrow name="ai_observability" and columns is 'ai_project_name' and values is 'CapG_ai'
    --> #dm:pstream-update-data-by-query ai_project_name is empty or ai_project_name is ''
--> @c:new-block
    --> @dm:empty
    --> @dm:addrow name="agent_output_stream" and columns is 'ai_project_name' and values is 'CapG_ai'
    --> #dm:pstream-update-data-by-query ai_project_name is empty or ai_project_name is ''
--> @c:new-block
    --> @dm:empty
    --> @dm:addrow name="rda_workflow_status" and columns is 'ai_project_name' and values is 'CapG_ai'
    --> #dm:pstream-update-data-by-query ai_project_name is empty or ai_project_name is ''
    ## ---------------------------------------
    --> @dm:empty
    --> @dm:addrow name is 'rda_shared_conversations' and limit=0
    --> #dm:query-persistent-stream * GET sharedby,ai_project_name,persona,_RDA_Id
    --> @dm:eval persona_fq_name is 'ai_project_name+ "/" +persona'
    --> @dm:eval originator is 'sharedby'
    --> @dm:dedup columns = "ai_project_name,persona"
    --> @dm:save name='fq_data'
--> @c:data-loop dataset = 'fq_data' and columns is 'ai_project_name,persona,persona_fq_name,originator'
    --> @dm:empty
    --> @dm:addrow name="rda_shared_conversations" and columns is 'persona_fq_name,originator' and values is '$persona_fq_name,$originator'
    --> #dm:pstream-update-data-by-query ai_project_name is '$ai_project_name' and persona is '$persona'
    --> @dm:save name='temp-output' and append="yes"
--> @c:new-block
    --> @dm:recall name="temp-output"
    --> @dm:save name="update_stream_output"
    ## -------------------
    --> @dm:empty
    --> @dm:addrow name is 'ai_observability' and limit=0
    --> #dm:query-persistent-stream persona_fq_name is empty GET ai_project_name,ai_persona,_RDA_Id
    --> @dm:eval persona_fq_name is 'ai_project_name+ "/" +ai_persona'
    --> @dm:dedup columns = "ai_project_name,ai_persona"
    --> @dm:save name='fq_data'
--> @c:data-loop dataset = 'fq_data' and columns is 'ai_project_name,ai_persona,persona_fq_name'
    --> @dm:empty
    --> @dm:addrow name="ai_observability" and columns is 'persona_fq_name' and values is '$persona_fq_name'
    --> #dm:pstream-update-data-by-query ai_project_name is '$ai_project_name' and ai_persona is '$ai_persona'
    --> @dm:save name='temp-output' and append="yes"
--> @c:new-block
    --> @dm:recall name="temp-output"
    --> @dm:save name="update_stream_output"
    ## -------------------
    --> @dm:empty
    --> @dm:addrow name is 'rda_chat_sessions' and limit=0
    --> #dm:query-persistent-stream persona_fq_name is empty GET ai_project_name,persona,_RDA_Id
    --> @dm:eval persona_fq_name is 'ai_project_name+ "/" +persona'
    --> @dm:dedup columns = "ai_project_name,persona"
    --> @dm:save name='fq_data'
--> @c:data-loop dataset = 'fq_data' and columns is 'ai_project_name,persona,persona_fq_name'
    --> @dm:empty
    --> @dm:addrow name="rda_chat_sessions" and columns is 'persona_fq_name' and values is '$persona_fq_name'
    --> #dm:pstream-update-data-by-query ai_project_name is '$ai_project_name' and persona is '$persona'
    --> @dm:save name='temp-output' and append="yes"
--> @c:new-block
    --> @dm:recall name="temp-output"
    --> @dm:save name="update_stream_output"