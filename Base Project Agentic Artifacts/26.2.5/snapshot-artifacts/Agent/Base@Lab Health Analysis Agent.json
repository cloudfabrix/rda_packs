{
  "flowName": "Lab Health Analysis Agent",
  "flowDesc": "Lab Health Analysis Agent",
  "flowData": {
    "nodes": [
      {
        "id": "start",
        "type": "start",
        "initialized": false,
        "position": {
          "x": 195,
          "y": 30
        },
        "data": {
          "name": "start",
          "label": "Start",
          "input_ports": [],
          "output_ports": [
            {
              "id": "start",
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "config_schema": {
                "model": {},
                "uiSchema": {}
              },
              "connection_restrictions": [],
              "connected_to": [
                "cfx-78e4742f-791b-4c1d-bb8f-9cfc3061fd33"
              ]
            }
          ]
        },
        "deletable": false,
        "label": "Start"
      },
      {
        "id": "cfx-78e4742f-791b-4c1d-bb8f-9cfc3061fd33",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": 270,
          "y": 90
        },
        "data": {
          "name": "agent_with_mcp",
          "label": "Check Lab Health (LLM)",
          "main": "agentic_AI_nodes.agent_tasks.ProcessMCPPrompt",
          "icon": "/assets/img/icons/blue_outline/pipeline.png",
          "input_document_count": 0,
          "parameter_model": {
            "type": "object",
            "properties": {
              "llm_credential": {
                "type": "string"
              },
              "persona": {
                "type": "string"
              },
              "prompt": {
                "type": "string"
              },
              "output_attribute_name": {
                "type": "string"
              },
              "server_token": {
                "type": "string"
              }
            },
            "required": [
              "llm_credential",
              "persona",
              "prompt"
            ]
          },
          "ui_schema": {
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/llm_credential"
              },
              {
                "type": "Control",
                "scope": "#/properties/persona"
              },
              {
                "type": "Control",
                "scope": "#/properties/prompt",
                "options": {
                  "multi": true
                }
              },
              {
                "type": "Control",
                "scope": "#/properties/output_attribute_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/server_token"
              }
            ]
          },
          "category": "Agentic AI Nodes",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "isGlobalVariableMapped": true,
              "globalVariableName": "agent_output",
              "connected_to": [
                "cfx-1fd24f4e-4c1a-4b88-acc6-4f477ffc2dff"
              ]
            }
          ],
          "formData": {
            "prompt": "check lab health and provide a report in html format.",
            "llm_credential": "gpt-4o",
            "globalVarMap": {
              "persona": "Persona",
              "output_attribute_name": "agent_output",
              "server_token": "Server_Token"
            }
          }
        },
        "label": "Check Lab Health (LLM)",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-1fd24f4e-4c1a-4b88-acc6-4f477ffc2dff",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": 330,
          "y": 195
        },
        "data": {
          "name": "agent_with_mcp",
          "label": "Evaluate Agent Output",
          "main": "agentic_AI_nodes.agent_tasks.ProcessMCPPrompt",
          "icon": "/assets/img/icons/blue_outline/pipeline.png",
          "input_document_count": 0,
          "parameter_model": {
            "type": "object",
            "properties": {
              "llm_credential": {
                "type": "string"
              },
              "persona": {
                "type": "string"
              },
              "prompt": {
                "type": "string"
              },
              "output_attribute_name": {
                "type": "string"
              },
              "server_token": {
                "type": "string"
              }
            },
            "required": [
              "llm_credential",
              "persona",
              "prompt"
            ]
          },
          "ui_schema": {
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/llm_credential"
              },
              {
                "type": "Control",
                "scope": "#/properties/persona"
              },
              {
                "type": "Control",
                "scope": "#/properties/prompt",
                "options": {
                  "multi": true
                }
              },
              {
                "type": "Control",
                "scope": "#/properties/output_attribute_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/server_token"
              }
            ]
          },
          "category": "Agentic AI Nodes",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "isGlobalVariableMapped": true,
              "globalVariableName": "evaluation_output",
              "connected_to": [
                "cfx-5c6538f3-23da-4b49-e432-56fe233c9654"
              ]
            }
          ],
          "formData": {
            "llm_credential": "gpt-4o",
            "globalVarMap": {
              "persona": "Persona",
              "output_attribute_name": "evaluation_output",
              "server_token": "Server_Token"
            },
            "prompt": "You are an evaluation agent. Given the output from an Lab Health agent in the variable {{agent_output}}, determine whether the Lab Health agent was successfully executed. **Do not analyze or interpret** the Lab Health agent results. Only check for evidence that the agent ran to completion.\n\nRespond in a single JSON line with this format only, without extra information or comments:\n\n{\"agent_run\": \"Success\"} \n\nor\n\n{\"agent_run\": \"Failure\"}\n\nUse \"Failure\" if the output is empty, incomplete, or contains signs of execution errors or failures."
          }
        },
        "label": "Evaluate Agent Output",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-5c6538f3-23da-4b49-e432-56fe233c9654",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": 375,
          "y": 300
        },
        "data": {
          "name": "write_data_to_pstream",
          "label": "Write Data to PStream",
          "main": "common_tasks.data_readwrite_tasks.WriteDataToPStream",
          "input_document_count": 0,
          "icon": "/assets/img/icons/blue_outline/query_pstream.png",
          "parameter_model": {
            "type": "object",
            "properties": {
              "pstream_name": {
                "type": "string"
              },
              "data": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "inputs": {
                      "type": "string",
                      "description": "Input column for pstream"
                    }
                  }
                }
              },
              "validate_data_model": {
                "type": "boolean",
                "default": false
              }
            },
            "required": [
              "pstream_name"
            ]
          },
          "ui_schema": {
            "type": "VerticalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/pstream_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/data"
              },
              {
                "type": "Control",
                "scope": "#/properties/validate_data_model"
              }
            ]
          },
          "category": "Common Tasks",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "connected_to": [
                "cfx-18839d16-ae7e-4229-fce4-4e4ce7742a5d"
              ]
            }
          ],
          "formData": {
            "validate_data_model": false,
            "pstream_name": "agent_output_stream",
            "globalVarMap": {
              "data": "agent_output"
            }
          }
        },
        "label": "Write Data to PStream",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-18839d16-ae7e-4229-fce4-4e4ce7742a5d",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": 420,
          "y": 405
        },
        "data": {
          "name": "write_data_to_pstream",
          "label": "Write Data to PStream",
          "main": "common_tasks.data_readwrite_tasks.WriteDataToPStream",
          "input_document_count": 0,
          "icon": "/assets/img/icons/blue_outline/query_pstream.png",
          "parameter_model": {
            "type": "object",
            "properties": {
              "pstream_name": {
                "type": "string"
              },
              "data": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "inputs": {
                      "type": "string",
                      "description": "Input column for pstream"
                    }
                  }
                }
              },
              "validate_data_model": {
                "type": "boolean",
                "default": false
              }
            },
            "required": [
              "pstream_name"
            ]
          },
          "ui_schema": {
            "type": "VerticalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/pstream_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/data"
              },
              {
                "type": "Control",
                "scope": "#/properties/validate_data_model"
              }
            ]
          },
          "category": "Common Tasks",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1"
            }
          ],
          "formData": {
            "validate_data_model": false,
            "pstream_name": "agent_output_stream",
            "globalVarMap": {
              "data": "evaluation_output"
            }
          }
        },
        "label": "Write Data to PStream 1",
        "sourcePosition": "right",
        "targetPosition": "left"
      }
    ],
    "edges": [
      {
        "id": "vueflow__edge-startstart-cfx-78e4742f-791b-4c1d-bb8f-9cfc3061fd33input_1",
        "type": "default",
        "source": "start",
        "target": "cfx-78e4742f-791b-4c1d-bb8f-9cfc3061fd33",
        "sourceHandle": "start",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Start",
          "targetLabel": "Agent with MCP"
        },
        "label": "",
        "sourceX": 262.500228304253,
        "sourceY": 62.60011423863486,
        "targetX": 338.00020275999316,
        "targetY": 86.99998620240603
      },
      {
        "id": "vueflow__edge-cfx-78e4742f-791b-4c1d-bb8f-9cfc3061fd33output_1-cfx-1fd24f4e-4c1a-4b88-acc6-4f477ffc2dffinput_1",
        "type": "default",
        "source": "cfx-78e4742f-791b-4c1d-bb8f-9cfc3061fd33",
        "target": "cfx-1fd24f4e-4c1a-4b88-acc6-4f477ffc2dff",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Agent with MCP",
          "targetLabel": "Agent with MCP 1"
        },
        "label": "",
        "sourceX": 338.00020275999316,
        "sourceY": 169.00029524129488,
        "targetX": 398.00026351023075,
        "targetY": 192.00000138996543
      },
      {
        "id": "vueflow__edge-cfx-1fd24f4e-4c1a-4b88-acc6-4f477ffc2dffoutput_1-cfx-5c6538f3-23da-4b49-e432-56fe233c9654input_1",
        "type": "default",
        "source": "cfx-1fd24f4e-4c1a-4b88-acc6-4f477ffc2dff",
        "target": "cfx-5c6538f3-23da-4b49-e432-56fe233c9654",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Agent with MCP 1",
          "targetLabel": "Write Data to PStream"
        },
        "label": "",
        "sourceX": 398.00026351023075,
        "sourceY": 274.0002800537355,
        "targetX": 443.00020275999316,
        "targetY": 297.00000138996546
      },
      {
        "id": "vueflow__edge-cfx-5c6538f3-23da-4b49-e432-56fe233c9654output_1-cfx-18839d16-ae7e-4229-fce4-4e4ce7742a5dinput_1",
        "type": "default",
        "source": "cfx-5c6538f3-23da-4b49-e432-56fe233c9654",
        "target": "cfx-18839d16-ae7e-4229-fce4-4e4ce7742a5d",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Write Data to PStream",
          "targetLabel": "Write Data to PStream 1"
        },
        "label": "",
        "sourceX": 443.00020275999316,
        "sourceY": 379.0003104288543,
        "targetX": 488.00020275999316,
        "targetY": 402.00003176508426
      }
    ],
    "position": [
      105.6765046296295,
      10.270422519479666
    ],
    "zoom": 1.0046939300411526,
    "viewport": {
      "x": 105.6765046296295,
      "y": 10.270422519479666,
      "zoom": 1.0046939300411526
    },
    "globalVariables": {
      "variables": [
        {
          "name": "agent_output",
          "runtime_input": false,
          "value_type": "string"
        },
        {
          "name": "evaluation_output",
          "runtime_input": false,
          "value_type": "string"
        },
        {
          "runtime_input": false,
          "name": "Server_Token",
          "value_type": "string",
          "value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyLWlkIjoic2hydXRpa2FAZmFicml4LmFpIiwid29ya3NwYWNlaWQiOiI4YjYyYTQ3Mi05OGYzLTRjNjQtYjkxNC1mZDA2ZGNmYzEyMDkiLCJyZGFjX2FwaV9lbmRwb2ludCI6Imh0dHA6Ly8xMC45NS4xMDcuNzE6ODgwOCJ9.m-f3dSDHofhMfT-5G6qKBnhcUybH_b-XjlRYIU6Uzl8"
        },
        {
          "name": "Persona",
          "runtime_input": true,
          "value_type": "dynamic_lov_list",
          "dynamic_lov_values": "AI Personas",
          "dynamic_lov_list": "AI Personas"
        }
      ]
    }
  },
  "ai_project_name": "Base",
  "flow_type": "agent"
}