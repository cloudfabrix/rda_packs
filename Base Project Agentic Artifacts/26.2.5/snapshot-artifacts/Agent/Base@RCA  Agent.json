{
  "flowName": "RCA  Agent",
  "flowDesc": "",
  "flowData": {
    "nodes": [
      {
        "id": "start",
        "type": "start",
        "initialized": false,
        "position": {
          "x": -345,
          "y": -165
        },
        "data": {
          "name": "start",
          "label": "Start",
          "input_ports": [],
          "output_ports": [
            {
              "id": "start",
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "config_schema": {
                "model": {},
                "uiSchema": {}
              },
              "connection_restrictions": [],
              "connected_to": [
                "cfx-f5f614ff-0a4d-479a-d7a2-818cf0c61440"
              ]
            }
          ]
        },
        "deletable": false,
        "label": "Start"
      },
      {
        "id": "cfx-bb645bef-6c29-4e94-9656-f1722d10c5fc",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -345,
          "y": -15
        },
        "data": {
          "name": "write_data_to_pstream",
          "label": "Save Agent Output",
          "main": "common_tasks.data_readwrite_tasks.WriteDataToPStream",
          "input_document_count": 0,
          "icon": "/assets/img/icons/blue_outline/query_pstream.png",
          "parameter_model": {
            "type": "object",
            "properties": {
              "pstream_name": {
                "type": "string"
              },
              "data": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "inputs": {
                      "type": "string",
                      "description": "Input column for pstream"
                    }
                  }
                }
              },
              "validate_data_model": {
                "type": "boolean",
                "default": false
              }
            },
            "required": [
              "pstream_name"
            ]
          },
          "ui_schema": {
            "type": "VerticalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/pstream_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/data"
              },
              {
                "type": "Control",
                "scope": "#/properties/validate_data_model"
              }
            ]
          },
          "category": "Common Tasks",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "connected_to": [
                "cfx-13ebe83d-d9ec-4bf2-bf28-da67d3c324dc"
              ]
            }
          ],
          "formData": {
            "validate_data_model": false,
            "pstream_name": "agent_output_stream",
            "globalVarMap": {
              "data": "agent_output"
            }
          }
        },
        "label": "Save Agent Output",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-d026cc2b-f4cf-471e-8834-733e89b34369",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -345,
          "y": 180
        },
        "data": {
          "name": "write_data_to_pstream",
          "label": "Save Evaluation Output",
          "main": "common_tasks.data_readwrite_tasks.WriteDataToPStream",
          "input_document_count": 0,
          "icon": "/assets/img/icons/blue_outline/query_pstream.png",
          "parameter_model": {
            "type": "object",
            "properties": {
              "pstream_name": {
                "type": "string"
              },
              "data": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "inputs": {
                      "type": "string",
                      "description": "Input column for pstream"
                    }
                  }
                }
              },
              "validate_data_model": {
                "type": "boolean",
                "default": false
              }
            },
            "required": [
              "pstream_name"
            ]
          },
          "ui_schema": {
            "type": "VerticalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/pstream_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/data"
              },
              {
                "type": "Control",
                "scope": "#/properties/validate_data_model"
              }
            ]
          },
          "category": "Common Tasks",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "connected_to": [
                "cfx-ef6ec775-d3f9-4998-ca02-758abb60cc1d"
              ],
              "isGlobalVariableMapped": false,
              "globalVariableName": "evaluation_output"
            }
          ],
          "formData": {
            "validate_data_model": false,
            "pstream_name": "agent_output_stream",
            "globalVarMap": {
              "data": "evaluation_output"
            }
          }
        },
        "label": "Save Evaluation Output",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-07a5020b-a67f-4cf5-dad0-1ba37f761560",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -180,
          "y": 105
        },
        "data": {
          "name": "agent_with_mcp",
          "label": "Run Remediation Commands",
          "main": "agentic_ai_nodes.agent_tasks.ProcessMCPPrompt",
          "input_document_count": 0,
          "parameter_model": {
            "type": "object",
            "properties": {
              "llm_credential": {
                "type": "string"
              },
              "persona": {
                "type": "string"
              },
              "prompt": {
                "type": "string"
              },
              "output_attribute_name": {
                "type": "string"
              },
              "server_token": {
                "type": "string"
              }
            },
            "required": [
              "llm_credential",
              "persona",
              "prompt"
            ]
          },
          "ui_schema": {
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/llm_credential"
              },
              {
                "type": "Control",
                "scope": "#/properties/persona"
              },
              {
                "type": "Control",
                "scope": "#/properties/prompt",
                "options": {
                  "multi": true
                }
              },
              {
                "type": "Control",
                "scope": "#/properties/output_attribute_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/server_token"
              }
            ]
          },
          "category": "Agentic AI Nodes",
          "icon": "/assets/img/icons/logoRda.png",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "connected_to": [
                "cfx-4aae6fa3-d42b-4145-f287-953b1f54941f"
              ],
              "isGlobalVariableMapped": true,
              "globalVariableName": "agent_remediation"
            }
          ],
          "formData": {
            "prompt": "Consider the given root cause analysis for the incident {{agent_output}}. This data includes the detailed root cause analysis with the remediation steps/commands to be followed to resolve the incident.You need to understand the effect on the system before executing the commands, to make sure no anomalous and risky commands are execute, after this check execute those commands to remediate the incident else you should not execute those commands.\nThe credentials are configured , you can use those to ssh into the device and execute the remediation commands.\n\nOutput the detailed steps which were performed, pre and post remediation status of the device in HTML format.\n**Make sure there should be contrast between the font and background color**.\n",
            "globalVarMap": {
              "server_token": "Server_Token",
              "llm_credential": "LLM",
              "output_attribute_name": "agent_remediation",
              "persona": "Persona"
            },
            "llm_credential": "gpt-4o",
            "persona": "RCA Remediation"
          }
        },
        "label": "Run Remediation Commands",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-1b93e7bc-ea2a-4631-e3ee-bd0dd7e735bb",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -30,
          "y": 105
        },
        "data": {
          "name": "run_pipeline",
          "label": "Post notification to slack(Rejected)",
          "main": "common_tasks.pipeline_tasks.RunPipeline",
          "input_document_count": 0,
          "parameter_model": {
            "type": "object",
            "properties": {
              "pipeline_name": {
                "type": "string"
              },
              "pipeline_type": {
                "type": "string"
              },
              "pipeline_version": {
                "type": "string"
              },
              "wait_for_completion": {
                "type": "string"
              },
              "pipeline_text": {
                "type": "string"
              }
            },
            "required": [
              "pipeline_type"
            ]
          },
          "ui_schema": {
            "type": "VerticalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/pipeline_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/pipeline_type"
              },
              {
                "type": "Control",
                "scope": "#/properties/pipeline_version"
              },
              {
                "type": "Control",
                "scope": "#/properties/wait_for_completion"
              },
              {
                "type": "Control",
                "scope": "#/properties/pipeline_text"
              }
            ]
          },
          "category": "Common Tasks",
          "icon": "/assets/img/icons/logoRda.png",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "connected_to": []
            }
          ],
          "formData": {
            "pipeline_name": "post-rejected-message",
            "pipeline_type": "published",
            "pipeline_version": "2025_07_31_1"
          }
        },
        "label": "Post notification to slack(Rejected)",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-d8f270f6-cd59-4528-e3a6-d1d35a95fac7",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -105,
          "y": -30
        },
        "data": {
          "name": "user_approval_request_multi_output",
          "label": "Create User Approval Request with Multi-Output",
          "main": "common_tasks.user_approval_tasks.UserApprovalRequestMultiOutput",
          "input_document_count": 0,
          "parameter_model": {
            "type": "object",
            "properties": {
              "incident_id": {
                "type": "string",
                "description": "Associated incident ID"
              },
              "stream_name": {
                "type": "string",
                "description": "Stream name to publish the approval request to"
              },
              "cfxql_query": {
                "type": "string",
                "description": "CFXQL query to filter the approval request"
              },
              "action_comments": {
                "type": "string",
                "description": "Description of the action requiring approval"
              },
              "outcome": {
                "type": "string",
                "description": "Outcome of the approval request"
              },
              "request_notes": {
                "type": "string",
                "description": "Notes for the approval request"
              },
              "timeout": {
                "type": "number",
                "description": "Timeout in minutes before auto-rejection",
                "default": 60
              },
              "output_attribute_name": {
                "type": "string",
                "description": "Output attribute name for the result"
              },
              "eval_expression": {
                "type": "string",
                "description": "Evaluation expression for multi-output processing"
              }
            },
            "required": [
              "eval_expression"
            ]
          },
          "output_ports": [
            {
              "label": "output_1",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "connected_to": [
                "cfx-07a5020b-a67f-4cf5-dad0-1ba37f761560"
              ],
              "isGlobalVariableMapped": true,
              "globalVariableName": "approved_gv"
            },
            {
              "label": "output_2",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_2",
              "connected_to": [
                "cfx-1b93e7bc-ea2a-4631-e3ee-bd0dd7e735bb"
              ],
              "isGlobalVariableMapped": true,
              "globalVariableName": "rejected_gv"
            },
            {
              "label": "output_3",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_3",
              "connected_to": [
                "cfx-4bfcecb0-9239-4ca1-8e60-7a57fef8e53c"
              ],
              "isGlobalVariableMapped": true,
              "globalVariableName": "default_gv"
            }
          ],
          "ui_schema": {
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/incident_id"
              },
              {
                "type": "Control",
                "scope": "#/properties/stream_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/cfxql_query"
              },
              {
                "type": "Control",
                "scope": "#/properties/action_comments",
                "options": {
                  "multi": true
                }
              },
              {
                "type": "Control",
                "scope": "#/properties/timeout"
              },
              {
                "type": "Control",
                "scope": "#/properties/output_attribute_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/eval_expression"
              }
            ]
          },
          "category": "Common Tasks",
          "icon": "/assets/img/icons/logoRda.png",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "formData": {
            "eval_expression": "'output_1' if status == 'Approved' else 'output_2' if status == 'Rejected' else 'output_3'",
            "globalVarMap": {
              "output_attribute_name": "status"
            },
            "action_comments": "Please approve the request to start executing the remediation commands to resolve the incident.",
            "cfxql_query": "*",
            "stream_name": "user_approval_stream",
            "incident_id": "{{Incident_ID}}",
            "outcome": "Execution of the remediation commands will resolve the root cause ",
            "approval_reference": "{{Incident_ID}}",
            "request_notes": "The Generated remediation commands will be executed on the impacted asset ips.",
            "timeout": 15
          }
        },
        "label": "Create User Approval Request with Multi-Output 2",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-4bfcecb0-9239-4ca1-8e60-7a57fef8e53c",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": 120,
          "y": 105
        },
        "data": {
          "name": "run_pipeline",
          "label": "Post notification to slack(Timed out)",
          "main": "common_tasks.pipeline_tasks.RunPipeline",
          "input_document_count": 0,
          "parameter_model": {
            "type": "object",
            "properties": {
              "pipeline_name": {
                "type": "string"
              },
              "pipeline_type": {
                "type": "string"
              },
              "pipeline_version": {
                "type": "string"
              },
              "wait_for_completion": {
                "type": "string"
              },
              "pipeline_text": {
                "type": "string"
              }
            },
            "required": [
              "pipeline_type"
            ]
          },
          "ui_schema": {
            "type": "VerticalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/pipeline_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/pipeline_type"
              },
              {
                "type": "Control",
                "scope": "#/properties/pipeline_version"
              },
              {
                "type": "Control",
                "scope": "#/properties/wait_for_completion"
              },
              {
                "type": "Control",
                "scope": "#/properties/pipeline_text"
              }
            ]
          },
          "category": "Common Tasks",
          "icon": "/assets/img/icons/logoRda.png",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "connected_to": []
            }
          ],
          "formData": {
            "pipeline_name": "post-timedout-message",
            "pipeline_type": "published"
          }
        },
        "label": "Post notification to slack(Timed out)",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-f5f614ff-0a4d-479a-d7a2-818cf0c61440",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -345,
          "y": -105
        },
        "data": {
          "name": "agent_with_mcp",
          "label": "Root Cause Analysis (LLM)",
          "main": "agentic_ai_nodes.agent_tasks.ProcessMCPPrompt",
          "input_document_count": 0,
          "parameter_model": {
            "type": "object",
            "properties": {
              "llm_credential": {
                "type": "string"
              },
              "persona": {
                "type": "string"
              },
              "prompt": {
                "type": "string"
              },
              "output_attribute_name": {
                "type": "string"
              },
              "server_token": {
                "type": "string"
              }
            },
            "required": [
              "llm_credential",
              "persona",
              "prompt"
            ]
          },
          "ui_schema": {
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/llm_credential"
              },
              {
                "type": "Control",
                "scope": "#/properties/persona"
              },
              {
                "type": "Control",
                "scope": "#/properties/prompt",
                "options": {
                  "multi": true
                }
              },
              {
                "type": "Control",
                "scope": "#/properties/output_attribute_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/server_token"
              }
            ]
          },
          "category": "Agentic AI Nodes",
          "icon": "/assets/img/icons/logoRda.png",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "isGlobalVariableMapped": true,
              "globalVariableName": "agent_output",
              "connected_to": [
                "cfx-bb645bef-6c29-4e94-9656-f1722d10c5fc"
              ]
            }
          ],
          "formData": {
            "globalVarMap": {
              "llm_credential": "LLM",
              "output_attribute_name": "agent_output",
              "server_token": "Server_Token",
              "persona": "Persona"
            },
            "persona": "RCA Remediation",
            "prompt": "Do root cause analysis and incident remediation i.e root cause inference for this incident {{Incident_ID}}.\nProvide a detailed RCA Report in complete HTML format. \n**Make sure there should be contrast between the font and background color**.\nALWAYS Call 'incident_remediate_recommend_template' prompt template",
            "server_token": "S"
          }
        },
        "label": "Root Cause Analysis (LLM)",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-4aae6fa3-d42b-4145-f287-953b1f54941f",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -180,
          "y": 210
        },
        "data": {
          "name": "write_data_to_pstream",
          "label": "Save Remediation Output",
          "main": "common_tasks.data_readwrite_tasks.WriteDataToPStream",
          "input_document_count": 0,
          "icon": "/assets/img/icons/blue_outline/query_pstream.png",
          "parameter_model": {
            "type": "object",
            "properties": {
              "pstream_name": {
                "type": "string"
              },
              "data": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "inputs": {
                      "type": "string",
                      "description": "Input column for pstream"
                    }
                  }
                }
              },
              "validate_data_model": {
                "type": "boolean",
                "default": false
              }
            },
            "required": [
              "pstream_name"
            ]
          },
          "ui_schema": {
            "type": "VerticalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/pstream_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/data"
              },
              {
                "type": "Control",
                "scope": "#/properties/validate_data_model"
              }
            ]
          },
          "category": "Common Tasks",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "connected_to": [
                "cfx-9c7728fe-9cb6-469a-e1f1-2c715133596e"
              ]
            }
          ],
          "formData": {
            "validate_data_model": false,
            "pstream_name": "agent_output_stream",
            "globalVarMap": {
              "data": "agent_remediation"
            }
          }
        },
        "label": "Save Remediation Output",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-13ebe83d-d9ec-4bf2-bf28-da67d3c324dc",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -345,
          "y": 75
        },
        "data": {
          "name": "agent_without_mcp",
          "label": "Agent Evaluator (LLM)",
          "main": "agentic_ai_nodes.agent_tasks.ProcessMCPPromptWithoutMCP",
          "input_document_count": 0,
          "parameter_model": {
            "type": "object",
            "properties": {
              "llm_credential": {
                "type": "string"
              },
              "persona": {
                "type": "string"
              },
              "prompt": {
                "type": "string"
              },
              "prompt_template": {
                "type": "string"
              },
              "output_attribute_name": {
                "type": "string"
              },
              "server_token": {
                "type": "string"
              }
            },
            "required": [
              "llm_credential",
              "persona",
              "prompt",
              "prompt_template"
            ]
          },
          "ui_schema": {
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/llm_credential"
              },
              {
                "type": "Control",
                "scope": "#/properties/persona"
              },
              {
                "type": "Control",
                "scope": "#/properties/prompt",
                "options": {
                  "multi": true
                }
              },
              {
                "type": "Control",
                "scope": "#/properties/prompt_template"
              },
              {
                "type": "Control",
                "scope": "#/properties/output_attribute_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/server_token"
              }
            ]
          },
          "category": "Agentic AI Nodes",
          "icon": "/assets/img/icons/logoRda.png",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "connected_to": [
                "cfx-d026cc2b-f4cf-471e-8834-733e89b34369"
              ],
              "isGlobalVariableMapped": true,
              "globalVariableName": "evaluation_output"
            }
          ],
          "formData": {
            "prompt": "You are an evaluation agent. Given the output from an root cause analysis agent below, determine whether the root cause analysis process was successfully executed. Do not analyze or interpret the root cause analysis results. Only check for evidence that the root cause analysis process ran to completion without errors. Provide the output in proper HTML report.\n\n**Make sure there should be contrast between the font and background color**.\n\n=========== BEGIN AGENT OUTPUT =============\n{{agent_output}}\n=========== END AGENT OUTPUT =============\n\nRespond in a single JSON line with this format only, without extra information or comments:\n\n{\n\"eval_comment\": \"Completed RCA and generated remediation commands.\",\n \"eval_detailed_explanation\" : \"Explain in plain text only\",\n \"eval_status\": \"success|failed|error\" \n} \n\n\n",
            "globalVarMap": {
              "llm_credential": "LLM",
              "persona": "Persona",
              "output_attribute_name": "evaluation_output",
              "server_token": "evaluation_output"
            },
            "prompt_template": "incident_remediate_recommend_template"
          }
        },
        "label": "Agent Evaluator (LLM)",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-9c7728fe-9cb6-469a-e1f1-2c715133596e",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -180,
          "y": 315
        },
        "data": {
          "name": "eval_expression",
          "label": "Create Incident Info for saving in output",
          "main": "common_tasks.base_rda_tasks.RunEvalExpression",
          "input_document_count": 0,
          "parameter_model": {
            "type": "object",
            "properties": {
              "inputs": {
                "type": "string"
              },
              "expression": {
                "type": "string"
              },
              "validate_data_model": {
                "type": "boolean",
                "default": false
              }
            },
            "required": [
              "expression"
            ]
          },
          "ui_schema": {
            "type": "VerticalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/inputs"
              },
              {
                "type": "Control",
                "scope": "#/properties/expression"
              },
              {
                "type": "Control",
                "scope": "#/properties/validate_data_model"
              }
            ]
          },
          "category": "Common Tasks",
          "icon": "/assets/img/icons/logoRda.png",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "isGlobalVariableMapped": true,
              "globalVariableName": "Incident_info",
              "connected_to": [
                "cfx-070c7850-8a1c-4ba9-c439-29c767af1d3a"
              ]
            }
          ],
          "formData": {
            "validate_data_model": false,
            "globalVarMap": {
              "inputs": "Incident_ID"
            },
            "expression": "{\"incident_id\" : \"{{Incident_ID}}\"}"
          }
        },
        "label": "Create Incident Info for saving in output",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-070c7850-8a1c-4ba9-c439-29c767af1d3a",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -180,
          "y": 405
        },
        "data": {
          "name": "write_data_to_pstream",
          "label": "Save Incident Information",
          "main": "common_tasks.data_readwrite_tasks.WriteDataToPStream",
          "input_document_count": 0,
          "icon": "/assets/img/icons/blue_outline/query_pstream.png",
          "parameter_model": {
            "type": "object",
            "properties": {
              "pstream_name": {
                "type": "string"
              },
              "data": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "inputs": {
                      "type": "string",
                      "description": "Input column for pstream"
                    }
                  }
                }
              },
              "validate_data_model": {
                "type": "boolean",
                "default": false
              }
            },
            "required": [
              "pstream_name"
            ]
          },
          "ui_schema": {
            "type": "VerticalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/pstream_name"
              },
              {
                "type": "Control",
                "scope": "#/properties/data"
              },
              {
                "type": "Control",
                "scope": "#/properties/validate_data_model"
              }
            ]
          },
          "category": "Common Tasks",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "output_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1"
            }
          ],
          "formData": {
            "validate_data_model": false,
            "pstream_name": "agent_output_stream",
            "globalVarMap": {
              "data": "Incident_info"
            }
          }
        },
        "label": "Save Incident Information",
        "sourcePosition": "right",
        "targetPosition": "left"
      },
      {
        "id": "cfx-ef6ec775-d3f9-4998-ca02-758abb60cc1d",
        "type": "wtask",
        "initialized": false,
        "position": {
          "x": -105,
          "y": -150
        },
        "data": {
          "name": "eval_expression_with_two_outputs",
          "label": "Run Eval Expression with Two Outputs",
          "main": "common_tasks.base_rda_tasks.RunEvalExpression",
          "input_document_count": 0,
          "parameter_model": {
            "type": "object",
            "properties": {
              "inputs": {
                "type": "string"
              },
              "expression": {
                "type": "string"
              },
              "validate_data_model": {
                "type": "boolean",
                "default": false
              }
            },
            "required": [
              "expression"
            ]
          },
          "output_ports": [
            {
              "label": "output_1",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_1",
              "connected_to": [
                "cfx-d8f270f6-cd59-4528-e3a6-d1d35a95fac7"
              ]
            },
            {
              "label": "output_2",
              "min_connections": 1,
              "max_connections": 1,
              "id": "output_2"
            }
          ],
          "ui_schema": {
            "type": "VerticalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/inputs"
              },
              {
                "type": "Control",
                "scope": "#/properties/expression"
              },
              {
                "type": "Control",
                "scope": "#/properties/validate_data_model"
              }
            ]
          },
          "category": "Conditional Tasks",
          "icon": "/assets/img/icons/logoRda.png",
          "input_ports": [
            {
              "label": "",
              "min_connections": 1,
              "max_connections": 1,
              "id": "input_1"
            }
          ],
          "formData": {
            "validate_data_model": false,
            "expression": "'output_2' if re_search(agent_output, \"No Remediation Required\") else 'output_1'",
            "globalVarMap": {}
          }
        },
        "label": "Run Eval Expression with Two Outputs",
        "sourcePosition": "right",
        "targetPosition": "left"
      }
    ],
    "edges": [
      {
        "id": "vueflow__edge-startstart-cfx-f5f614ff-0a4d-479a-d7a2-818cf0c61440input_1",
        "type": "default",
        "source": "start",
        "target": "cfx-f5f614ff-0a4d-479a-d7a2-818cf0c61440",
        "sourceHandle": "start",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Start",
          "targetLabel": "Agent with MCP"
        },
        "label": "",
        "sourceX": -277.5000137197432,
        "sourceY": -132.40001540105015,
        "targetX": -277.0000323841654,
        "targetY": -108.00001496752019
      },
      {
        "id": "vueflow__edge-cfx-f5f614ff-0a4d-479a-d7a2-818cf0c61440output_1-cfx-bb645bef-6c29-4e94-9656-f1722d10c5fcinput_1",
        "type": "default",
        "source": "cfx-f5f614ff-0a4d-479a-d7a2-818cf0c61440",
        "target": "cfx-bb645bef-6c29-4e94-9656-f1722d10c5fc",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Agent with MCP",
          "targetLabel": "Save Agent Output"
        },
        "label": "",
        "sourceX": -277.0000323841654,
        "sourceY": -26.00004083422725,
        "targetX": -277.0000323841654,
        "targetY": -18.00001496752019
      },
      {
        "id": "vueflow__edge-cfx-d8f270f6-cd59-4528-e3a6-d1d35a95fac7output_1-cfx-07a5020b-a67f-4cf5-dad0-1ba37f761560input_1",
        "type": "default",
        "source": "cfx-d8f270f6-cd59-4528-e3a6-d1d35a95fac7",
        "target": "cfx-07a5020b-a67f-4cf5-dad0-1ba37f761560",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Create User Approval Request with Multi-Output 2",
          "targetLabel": "Run Remediation Commands"
        },
        "label": "",
        "sourceX": -82.33750127215217,
        "sourceY": 52.999991213328585,
        "targetX": -112.00003238416544,
        "targetY": 102.00000316877318
      },
      {
        "id": "vueflow__edge-cfx-d8f270f6-cd59-4528-e3a6-d1d35a95fac7output_2-cfx-1b93e7bc-ea2a-4631-e3ee-bd0dd7e735bbinput_1",
        "type": "default",
        "source": "cfx-d8f270f6-cd59-4528-e3a6-d1d35a95fac7",
        "target": "cfx-1b93e7bc-ea2a-4631-e3ee-bd0dd7e735bb",
        "sourceHandle": "output_2",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Create User Approval Request with Multi-Output 2",
          "targetLabel": "Post notification to slack(Rejected)"
        },
        "label": "",
        "sourceX": -37.01251015400284,
        "sourceY": 52.999991213328585,
        "targetX": 37.999967615834564,
        "targetY": 102.00000316877318
      },
      {
        "id": "vueflow__edge-cfx-d8f270f6-cd59-4528-e3a6-d1d35a95fac7output_3-cfx-4bfcecb0-9239-4ca1-8e60-7a57fef8e53cinput_1",
        "type": "default",
        "source": "cfx-d8f270f6-cd59-4528-e3a6-d1d35a95fac7",
        "target": "cfx-4bfcecb0-9239-4ca1-8e60-7a57fef8e53c",
        "sourceHandle": "output_3",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Create User Approval Request with Multi-Output 2",
          "targetLabel": "Post notification to slack(Timed out)"
        },
        "label": "",
        "sourceX": 8.312480964146488,
        "sourceY": 52.999991213328585,
        "targetX": 187.9998950706611,
        "targetY": 102.00000316877318
      },
      {
        "id": "vueflow__edge-cfx-07a5020b-a67f-4cf5-dad0-1ba37f761560output_1-cfx-4aae6fa3-d42b-4145-f287-953b1f54941finput_1",
        "type": "default",
        "source": "cfx-07a5020b-a67f-4cf5-dad0-1ba37f761560",
        "target": "cfx-4aae6fa3-d42b-4145-f287-953b1f54941f",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Run Remediation Commands",
          "targetLabel": "Save Remediation Output"
        },
        "label": "",
        "sourceX": -112.00003238416544,
        "sourceY": 183.9999954383595,
        "targetX": -112.00003238416544,
        "targetY": 207.00003944135992
      },
      {
        "id": "vueflow__edge-cfx-bb645bef-6c29-4e94-9656-f1722d10c5fcoutput_1-cfx-13ebe83d-d9ec-4bf2-bf28-da67d3c324dcinput_1",
        "type": "default",
        "source": "cfx-bb645bef-6c29-4e94-9656-f1722d10c5fc",
        "target": "cfx-13ebe83d-d9ec-4bf2-bf28-da67d3c324dc",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Save Agent Output",
          "targetLabel": "Agent without MCP"
        },
        "label": "",
        "sourceX": -277.0000323841654,
        "sourceY": 63.99997730206613,
        "targetX": -277.0000323841654,
        "targetY": 72.00000316877318
      },
      {
        "id": "vueflow__edge-cfx-13ebe83d-d9ec-4bf2-bf28-da67d3c324dcoutput_1-cfx-d026cc2b-f4cf-471e-8834-733e89b34369input_1",
        "type": "default",
        "source": "cfx-13ebe83d-d9ec-4bf2-bf28-da67d3c324dc",
        "target": "cfx-d026cc2b-f4cf-471e-8834-733e89b34369",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Agent without MCP",
          "targetLabel": "Save Evaluation Output"
        },
        "label": "",
        "sourceX": -277.0000323841654,
        "sourceY": 154.00003171094625,
        "targetX": -277.0000323841654,
        "targetY": 176.99996689618644
      },
      {
        "id": "vueflow__edge-cfx-4aae6fa3-d42b-4145-f287-953b1f54941foutput_1-cfx-9c7728fe-9cb6-469a-e1f1-2c715133596einput_1",
        "type": "default",
        "source": "cfx-4aae6fa3-d42b-4145-f287-953b1f54941f",
        "target": "cfx-9c7728fe-9cb6-469a-e1f1-2c715133596e",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Save Remediation Output",
          "targetLabel": "Create Incident Info for saving in output"
        },
        "label": "",
        "sourceX": -112.00003238416544,
        "sourceY": 288.9999954383595,
        "targetX": -112.00003238416544,
        "targetY": 312.0000394413599
      },
      {
        "id": "vueflow__edge-cfx-9c7728fe-9cb6-469a-e1f1-2c715133596eoutput_1-cfx-070c7850-8a1c-4ba9-c439-29c767af1d3ainput_1",
        "type": "default",
        "source": "cfx-9c7728fe-9cb6-469a-e1f1-2c715133596e",
        "target": "cfx-070c7850-8a1c-4ba9-c439-29c767af1d3a",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Create Incident Info for saving in output",
          "targetLabel": "Save Incident Information"
        },
        "label": "",
        "sourceX": -112.00003238416544,
        "sourceY": 394.00003171094625,
        "targetX": -112.00003238416544,
        "targetY": 401.99996689618644
      },
      {
        "id": "vueflow__edge-cfx-d026cc2b-f4cf-471e-8834-733e89b34369output_1-cfx-ef6ec775-d3f9-4998-ca02-758abb60cc1dinput_1",
        "type": "default",
        "source": "cfx-d026cc2b-f4cf-471e-8834-733e89b34369",
        "target": "cfx-ef6ec775-d3f9-4998-ca02-758abb60cc1d",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Save Evaluation Output",
          "targetLabel": "Run Eval Expression with Two Outputs"
        },
        "label": "",
        "sourceX": -277.0000323841654,
        "sourceY": 258.9999954383595,
        "targetX": -37.000032384165436,
        "targetY": -152.9999968312268
      },
      {
        "id": "vueflow__edge-cfx-ef6ec775-d3f9-4998-ca02-758abb60cc1doutput_1-cfx-d8f270f6-cd59-4528-e3a6-d1d35a95fac7input_1",
        "type": "default",
        "source": "cfx-ef6ec775-d3f9-4998-ca02-758abb60cc1d",
        "target": "cfx-d8f270f6-cd59-4528-e3a6-d1d35a95fac7",
        "sourceHandle": "output_1",
        "targetHandle": "input_1",
        "data": {
          "sourceLabel": "Run Eval Expression with Two Outputs",
          "targetLabel": "Create User Approval Request with Multi-Output 2"
        },
        "label": "",
        "sourceX": -70.99999647140277,
        "sourceY": -67.00002692296478,
        "targetX": -37.000032384165436,
        "targetY": -32.999996831226824
      }
    ],
    "position": [
      346.9885796904154,
      173.9081578150846
    ],
    "zoom": 0.8413398168777119,
    "viewport": {
      "x": 346.9885796904154,
      "y": 173.9081578150846,
      "zoom": 0.8413398168777119
    },
    "globalVariables": {
      "variables": [
        {
          "name": "Server_Token",
          "value_type": "string",
          "value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyLWlkIjoiYXRoYXJ2YS5oYW5hZ2FsQGNsb3VkZmFicml4LmNvbSIsIndvcmtzcGFjZWlkIjoiOGI2MmE0NzItOThmMy00YzY0LWI5MTQtZmQwNmRjZmMxMjA5IiwicmRhY19hcGlfZW5kcG9pbnQiOiJodHRwOi8vMTAuOTUuMTA3LjcxOjg4MDgifQ.7vGBEz8H8dTz6gyDacbLS04GWRDWJHXRsOVNBb2Yres",
          "runtime_input": false
        },
        {
          "name": "agent_output",
          "value_type": "string",
          "runtime_input": false
        },
        {
          "name": "evaluation_output",
          "value_type": "string",
          "runtime_input": false
        },
        {
          "name": "Incident_ID",
          "runtime_input": true,
          "value_type": "string"
        },
        {
          "name": "agent_remediation",
          "runtime_input": false,
          "value_type": "string"
        },
        {
          "name": "status",
          "runtime_input": false,
          "value_type": "string"
        },
        {
          "name": "updated_evaluation_output",
          "runtime_input": false,
          "value_type": "string"
        },
        {
          "name": "LLM",
          "runtime_input": true,
          "value_type": "dynamic_lov_list",
          "dynamic_lov_values": "LLM Models",
          "dynamic_lov_list": "LLM Models"
        },
        {
          "name": "status_1",
          "runtime_input": false,
          "value_type": "string"
        },
        {
          "name": "Persona",
          "runtime_input": true,
          "value_type": "dynamic_lov_list",
          "dynamic_lov_values": "AI Personas",
          "dynamic_lov_list": "AI Personas"
        },
        {
          "name": "approved_gv",
          "runtime_input": false,
          "value_type": "string"
        },
        {
          "name": "rejected_gv",
          "runtime_input": false,
          "value_type": "string"
        },
        {
          "name": "default_gv",
          "runtime_input": false,
          "value_type": "string"
        },
        {
          "name": "Incident_info",
          "runtime_input": false,
          "value_type": "string"
        }
      ]
    }
  },
  "ai_project_name": "Base",
  "flow_type": "agent"
}