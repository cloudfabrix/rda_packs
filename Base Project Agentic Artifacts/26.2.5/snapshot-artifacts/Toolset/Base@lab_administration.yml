enabled: true
domain: lab_administration
description: Lab Network Diagnotics and Administration
tools:
    -   name: check_switch_temperature
        type: runPipeline
        save_to_cache: false
        fetch_single_value: true
        description: "Run SSH commands on network devices get get current temperature\
            \ and show current temperatures, thersholds for \nalarming and overall\
            \ health of the switch intake,outlet and powersupply (PS) temperatures\n"
        custom_config:
            template_type: jinja
            pipeline_content: "@dm:empty\n    --> @dm:addrow ip_address=\"10.95.158.10\"\
                \ \n    --> @sshv2:execute command=\"show env temp\" &    column_name=\"\
                ip_address\"\n            & secret_names=\"lab-switch-cred\"\n"
            pipeline_output_columns:
                - ip_address
                - output
        parameters: []
    -   name: run_ping
        type: runPipeline
        save_to_cache: false
        description: "Run ping on more more devices and return status for each.\n\
            Return value format is:\n    DEVICE_IP_1: STATUS, DEVICE_IP_2, STATUS,\n\
            \nExample Return String:\n    10.95.1.2: Success, 10.95.12.7: Success,\
            \ 10.95.22.28: Failed \n"
        custom_config:
            template_type: jinja
            pipeline_content: "@dm:empty    \n--> @dm:addrow ips = \"{{ip_address}}\"\
                \n--> @diagnostictools:ping column_name_host = ips\n--> @dm:eval output\
                \ = \"source_ip + ': '+collection_status\"\n--> @dm:eval dummy = \"\
                'dummy'\"\n--> @dm:implode key_columns = \"dummy\" & merge_columns\
                \ = \"output\"\n--> @dm:selectcolumns include = \"output\"\n"
            pipeline_output_columns:
                - output
        parameters:
            -   name: ip_address
                description: IP Address of the target device. Multiple IPs can be
                    specified separated by a comma and no spaces.
                type: string
    -   name: post_to_slack
        type: runPipeline
        save_to_cache: false
        description: 'Post a message to Slack channel. Channel is hard coded by the
            tool.

            '
        custom_config:
            template_type: jinja
            pipeline_content: '@dm:empty

                --> @dm:addrow message = ''{{message}}''

                -->  @dm:eval     channel = "''#lab-admin''"

                -->  @slack:post-message-to-channel     channel_col = ''channel''
                and message_col = ''message''

                '
        parameters:
            -   name: message
                description: Message to be posted to Slack. Make sure there are no
                    new lines or single quotes in the message. Use Slack Rich Text
                    format to create a visually appealing message. Apply color codes
                    to status where necessary.
                type: string
